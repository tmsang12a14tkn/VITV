@model DateTime
@{
    DateTime d = Model;
    System.Globalization.DateTimeFormatInfo dfi = System.Globalization.DateTimeFormatInfo.CurrentInfo;
    System.Globalization.Calendar cal = dfi.Calendar;
}
@for (int i = 0; i < 10; i++)
{
    //--Tuần tính từ T7 tuần trước đển T6 tuần hiện tại--//
    var currDay = d.DayOfWeek;
    var prevSat = d.AddDays(((int)currDay + 1) * -1);
    var beginWeek = prevSat.ToString("dd/MM/yyyy");
    var endWeek = prevSat.AddDays(6).ToString("dd/MM/yyyy");
    //if (d.Year != prevSat.AddDays(-1).Year)
    //{
    //    break;
    //}else
    //{
        d = prevSat.AddDays(-1);    
    
    <p data-date="@d.AddDays(+1)"><a href="#" class="selectpicker" data-display="Tuần @cal.GetWeekOfYear(prevSat, dfi.CalendarWeekRule, dfi.FirstDayOfWeek) / @prevSat.Year" data-start="@beginWeek" data-end="@endWeek">Tuần từ @beginWeek - @endWeek ( @cal.GetWeekOfYear(prevSat, dfi.CalendarWeekRule, dfi.FirstDayOfWeek) )</a></p>
}
