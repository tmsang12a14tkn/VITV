!function(){define("Swipe",["exports"],function(){function t(t,e){"use strict";function i(){m=y.children,b=m.length,m.length<2&&(e.continuous=!1),f.transitions&&e.continuous&&m.length<3&&(y.appendChild(m[0].cloneNode(!0)),y.appendChild(y.children[1].cloneNode(!0)),m=y.children),g=new Array(m.length),v=t.getBoundingClientRect().width||t.offsetWidth,y.style.width=m.length*v+"px";for(var i=m.length;i--;){var n=m[i];n.style.width=v+"px",n.setAttribute("data-index",i),f.transitions&&(n.style.left=i*-v+"px",a(i,_>i?-v:i>_?v:0,0))}e.continuous&&f.transitions&&(a(r(_-1),-v,0),a(r(_+1),v,0)),f.transitions||(y.style.left=_*-v+"px"),t.style.visibility="visible"}function n(){e.continuous?o(_-1):_&&o(_-1)}function s(){e.continuous?o(_+1):_<m.length-1&&o(_+1)}function r(t){return(m.length+t%m.length)%m.length}function o(t,i){if(_!=t){if(f.transitions){var n=Math.abs(_-t)/(_-t);if(e.continuous){var s=n;n=-g[r(t)]/v,n!==s&&(t=-n*m.length+t)}for(var o=Math.abs(_-t)-1;o--;)a(r((t>_?t:_)-o-1),v*n,0);t=r(t),a(_,v*n,i||w),a(t,0,i||w),e.continuous&&a(r(t-n),-(v*n),0)}else t=r(t),u(_*-v,t*-v,i||w);_=t,d(e.callback&&e.callback(_,m[_]))}}function a(t,e,i){l(t,e,i),g[t]=e}function l(t,e,i){var n=m[t],s=n&&n.style;s&&(s.webkitTransitionDuration=s.MozTransitionDuration=s.msTransitionDuration=s.OTransitionDuration=s.transitionDuration=i+"ms",s.webkitTransform="translate("+e+"px,0)"+"translateZ(0)",s.msTransform=s.MozTransform=s.OTransform="translateX("+e+"px)")}function u(t,i,n){if(!n)return y.style.left=i+"px",void 0;var s=+new Date,r=setInterval(function(){var o=+new Date-s;return o>n?(y.style.left=i+"px",S&&c(),e.transitionEnd&&e.transitionEnd.call(event,_,m[_]),clearInterval(r),void 0):(y.style.left=(i-t)*(Math.floor(100*(o/n))/100)+t+"px",void 0)},4)}function c(){k=setTimeout(s,S)}function h(){S=0,clearTimeout(k)}var p=function(){},d=function(t){setTimeout(t||p,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(t){var e=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var i in e)if(void 0!==t.style[e[i]])return!0;return!1}(document.createElement("swipe"))};if(t){var m,g,v,b,y=t.children[0];e=e||{};var _=parseInt(e.startSlide,10)||0,w=e.speed||300;e.continuous=void 0!==e.continuous?e.continuous:!0;var k,x,S=e.auto||0,E={},C={},T={handleEvent:function(t){switch(t.type){case"touchstart":this.start(t);break;case"touchmove":this.move(t);break;case"touchend":d(this.end(t));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":d(this.transitionEnd(t));break;case"resize":d(i)}e.stopPropagation&&t.stopPropagation()},start:function(t){var e=t.touches[0];E={x:e.pageX,y:e.pageY,time:+new Date},x=void 0,C={},y.addEventListener("touchmove",this,!1),y.addEventListener("touchend",this,!1)},move:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){e.disableScroll&&t.preventDefault();var i=t.touches[0];C={x:i.pageX-E.x,y:i.pageY-E.y},"undefined"==typeof x&&(x=!!(x||Math.abs(C.x)<Math.abs(C.y))),x||(t.preventDefault(),h(),e.continuous?(l(r(_-1),C.x+g[r(_-1)],0),l(_,C.x+g[_],0),l(r(_+1),C.x+g[r(_+1)],0)):(C.x=C.x/(!_&&C.x>0||_==m.length-1&&C.x<0?Math.abs(C.x)/v+1:1),l(_-1,C.x+g[_-1],0),l(_,C.x+g[_],0),l(_+1,C.x+g[_+1],0)))}},end:function(){var t=+new Date-E.time,i=Number(t)<250&&Math.abs(C.x)>20||Math.abs(C.x)>v/2,n=!_&&C.x>0||_==m.length-1&&C.x<0;e.continuous&&(n=!1);var s=C.x<0;x||(i&&!n?(s?(e.continuous?(a(r(_-1),-v,0),a(r(_+2),v,0)):a(_-1,-v,0),a(_,g[_]-v,w),a(r(_+1),g[r(_+1)]-v,w),_=r(_+1)):(e.continuous?(a(r(_+1),v,0),a(r(_-2),-v,0)):a(_+1,v,0),a(_,g[_]+v,w),a(r(_-1),g[r(_-1)]+v,w),_=r(_-1)),e.callback&&e.callback(_,m[_])):e.continuous?(a(r(_-1),-v,w),a(_,0,w),a(r(_+1),v,w)):(a(_-1,-v,w),a(_,0,w),a(_+1,v,w))),y.removeEventListener("touchmove",T,!1),y.removeEventListener("touchend",T,!1)},transitionEnd:function(t){parseInt(t.target.getAttribute("data-index"),10)==_&&(S&&c(),e.transitionEnd&&e.transitionEnd.call(t,_,m[_]))}};return i(),S&&c(),f.addEventListener?(f.touch&&y.addEventListener("touchstart",T,!1),f.transitions&&(y.addEventListener("webkitTransitionEnd",T,!1),y.addEventListener("msTransitionEnd",T,!1),y.addEventListener("oTransitionEnd",T,!1),y.addEventListener("otransitionend",T,!1),y.addEventListener("transitionend",T,!1)),window.addEventListener("resize",T,!1)):window.onresize=function(){i()},{setup:function(){i()},slide:function(t,e){h(),o(t,e)},prev:function(){h(),n()},next:function(){h(),s()},stop:function(){h()},getPos:function(){return _},getNumSlides:function(){return b},kill:function(){h(),y.style.width="",y.style.left="";for(var t=m.length;t--;){var e=m[t];e.style.width="",e.style.left="",f.transitions&&l(t,0,0)}f.addEventListener?(y.removeEventListener("touchstart",T,!1),y.removeEventListener("webkitTransitionEnd",T,!1),y.removeEventListener("msTransitionEnd",T,!1),y.removeEventListener("oTransitionEnd",T,!1),y.removeEventListener("otransitionend",T,!1),y.removeEventListener("transitionend",T,!1),window.removeEventListener("resize",T,!1)):window.onresize=null}}}}return(window.jQuery||window.Zepto)&&!function(e){e.fn.Swipe=function(i){return this.each(function(){e(this).data("Swipe",new t(e(this)[0],i))})}}(window.jQuery||window.Zepto),t}),define("hbs/handlebars",[],function(){var t=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return a[t]||"&amp;"}function i(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}function n(t){return t instanceof o?t.toString():t||0===t?(t=""+t,u.test(t)?t.replace(l,e):t):""}function s(t){return t||0===t?p(t)&&0===t.length?!0:!1:!0}var r={},o=t,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/;r.extend=i;var c=Object.prototype.toString;r.toString=c;var h=function(t){return"function"==typeof t};h(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)});var h;r.isFunction=h;var p=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===c.call(t):!1};return r.isArray=p,r.escapeExpression=n,r.isEmpty=s,r}(t),i=function(){"use strict";function t(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),r=0;r<i.length;r++)this[i[r]]=s[i[r]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var e,i=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),n=function(t,e){"use strict";function i(t,e){this.helpers=t||{},this.partials=e||{},n(this)}function n(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var n=i.inverse||function(){},s=i.fn;return p(e)&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?n(this):h(e)?e.length>0?t.helpers.each(e,i):n(this):s(e)}),t.registerHelper("each",function(t,e){var i,n=e.fn,s=e.inverse,r=0,o="";if(p(t)&&(t=t.call(this)),e.data&&(i=g(e.data)),t&&"object"==typeof t)if(h(t))for(var a=t.length;a>r;r++)i&&(i.index=r,i.first=0===r,i.last=r===t.length-1),o+=n(t[r],{data:i});else for(var l in t)t.hasOwnProperty(l)&&(i&&(i.key=l,i.index=r,i.first=0===r),o+=n(t[l],{data:i}),r++);return 0===r&&(o=s(this)),o}),t.registerHelper("if",function(t,e){return p(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||o.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,i){return t.helpers["if"].call(this,e,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),t.registerHelper("with",function(t,e){return p(t)&&(t=t.call(this)),o.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,i){var n=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;t.log(n,e)})}function s(t,e){m.log(t,e)}var r={},o=t,a=e,l="1.3.0";r.VERSION=l;var u=4;r.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};r.REVISION_CHANGES=c;var h=o.isArray,p=o.isFunction,d=o.toString,f="[object Object]";r.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:s,registerHelper:function(t,e,i){if(d.call(t)===f){if(i||e)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else i&&(e.not=i),this.helpers[t]=e},registerPartial:function(t,e){d.call(t)===f?o.extend(this.partials,t):this.partials[t]=e}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var i=m.methodMap[t];"undefined"!=typeof console&&console[i]&&console[i].call(console,e)}}};r.logger=m,r.log=s;var g=function(t){var e={};return o.extend(e,t),e};return r.createFrame=g,r}(e,i),s=function(t,e,i){"use strict";function n(t){var e=t&&t[0]||1,i=p;if(e!==i){if(i>e){var n=d[i],s=d[e];throw new h("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new h("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new h("No environment passed to template");var i=function(t,i,n,s,r,o){var a=e.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(e.compile){var l={helpers:s,partials:r,data:o};return r[i]=e.compile(t,{data:void 0!==o},e),r[i](n,l)}throw new h("The partial "+i+" could not be compiled when running in runtime-only mode")},n={escapeExpression:c.escapeExpression,invokePartial:i,programs:[],program:function(t,e,i){var n=this.programs[t];return i?n=o(t,e,i):n||(n=this.programs[t]=o(t,e)),n},merge:function(t,e){var i=t||e;return t&&e&&t!==e&&(i={},c.extend(i,e),c.extend(i,t)),i},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,s){s=s||{};var r,o,a=s.partial?s:e;s.partial||(r=s.helpers,o=s.partials);var l=t.call(n,a,i,r,o,s.data);return s.partial||e.VM.checkRevision(n.compilerInfo),l}}function r(t,e,i){var n=Array.prototype.slice.call(arguments,3),s=function(t,s){return s=s||{},e.apply(this,[t,s.data||i].concat(n))};return s.program=t,s.depth=n.length,s}function o(t,e,i){var n=function(t,n){return n=n||{},e(t,n.data||i)};return n.program=t,n.depth=0,n}function a(t,e,i,n,s,r){var o={partial:!0,helpers:n,partials:s,data:r};if(void 0===t)throw new h("The partial "+e+" could not be found");return t instanceof Function?t(i,o):void 0}function l(){return""}var u={},c=t,h=e,p=i.COMPILER_REVISION,d=i.REVISION_CHANGES;return u.checkRevision=n,u.template=s,u.programWithDepth=r,u.program=o,u.invokePartial=a,u.noop=l,u}(e,i,n),r=function(t,e,i,n,s){"use strict";var r,o=t,a=e,l=i,u=n,c=s,h=function(){var t=new o.HandlebarsEnvironment;return u.extend(t,o),t.SafeString=a,t.Exception=l,t.Utils=u,t.VM=c,t.template=function(e){return c.template(e,t)},t},p=h();return p.create=h,r=p}(n,t,i,e,s),o=function(t){"use strict";function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var i,n=t,s={ProgramNode:function(t,i,n,r){var o,a;3===arguments.length?(r=n,n=null):2===arguments.length&&(r=i,i=null),e.call(this,r),this.type="program",this.statements=t,this.strip={},n?(a=n[0],a?(o={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new s.ProgramNode(n,i,o)):this.inverse=new s.ProgramNode(n,i),this.strip.right=i.left):i&&(this.strip.left=i.right)},MustacheNode:function(t,i,n,r,o){if(e.call(this,o),this.type="mustache",this.strip=r,null!=n&&n.charAt){var a=n.charAt(3)||n.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!n;this.sexpr=t instanceof s.SexprNode?t:new s.SexprNode(t,i),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,i,n){e.call(this,n),this.type="sexpr",this.hash=i;var s=this.id=t[0],r=this.params=t.slice(1),o=this.eligibleHelper=s.isSimple;this.isHelper=o&&(r.length||i)},PartialNode:function(t,i,n,s){e.call(this,s),this.type="partial",this.partialName=t,this.context=i,this.strip=n},BlockNode:function(t,i,s,r,o){if(e.call(this,o),t.sexpr.id.original!==r.path.original)throw new n(t.sexpr.id.original+" doesn't match "+r.path.original,this);this.type="block",this.mustache=t,this.program=i,this.inverse=s,this.strip={left:t.strip.left,right:r.strip.right},(i||s).strip.left=t.strip.right,(s||i).strip.right=r.strip.left,s&&!i&&(this.isInverse=!0)},ContentNode:function(t,i){e.call(this,i),this.type="content",this.string=t},HashNode:function(t,i){e.call(this,i),this.type="hash",this.pairs=t},IdNode:function(t,i){e.call(this,i),this.type="ID";for(var s="",r=[],o=0,a=0,l=t.length;l>a;a++){var u=t[a].part;if(s+=(t[a].separator||"")+u,".."===u||"."===u||"this"===u){if(r.length>0)throw new n("Invalid path: "+s,this);".."===u?o++:this.isScoped=!0}else r.push(u)}this.original=s,this.parts=r,this.string=r.join("."),this.depth=o,this.isSimple=1===t.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},PartialNameNode:function(t,i){e.call(this,i),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,i){e.call(this,i),this.type="DATA",this.id=t},StringNode:function(t,i){e.call(this,i),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,i){e.call(this,i),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,i){e.call(this,i),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,i){e.call(this,i),this.type="comment",this.comment=t}};return i=s}(i),a=function(){"use strict";var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var i={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,i,n,s,r,o){var a=o.length-1;switch(r){case 1:return new s.ProgramNode(o[a-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],o[a-1],o[a],this._$);break;case 4:this.$=new s.ProgramNode(o[a-2],o[a-1],o[a],this._$);break;case 5:this.$=new s.ProgramNode(o[a-1],o[a],[],this._$);break;case 6:this.$=new s.ProgramNode(o[a],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[o[a]];break;case 10:o[a-1].push(o[a]),this.$=o[a-1];break;case 11:this.$=new s.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a],this._$);break;case 12:this.$=new s.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a],this._$);break;case 13:this.$=o[a];break;case 14:this.$=o[a];break;case 15:this.$=new s.ContentNode(o[a],this._$);break;case 16:this.$=new s.CommentNode(o[a],this._$);break;case 17:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 18:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 19:this.$={path:o[a-1],strip:t(o[a-2],o[a])};break;case 20:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 21:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 22:this.$=new s.PartialNode(o[a-2],o[a-1],t(o[a-3],o[a]),this._$);break;case 23:this.$=t(o[a-1],o[a]);break;case 24:this.$=new s.SexprNode([o[a-2]].concat(o[a-1]),o[a],this._$);break;case 25:this.$=new s.SexprNode([o[a]],null,this._$);break;case 26:this.$=o[a];break;case 27:this.$=new s.StringNode(o[a],this._$);break;case 28:this.$=new s.IntegerNode(o[a],this._$);break;case 29:this.$=new s.BooleanNode(o[a],this._$);break;case 30:this.$=o[a];break;case 31:o[a-1].isHelper=!0,this.$=o[a-1];break;case 32:this.$=new s.HashNode(o[a],this._$);break;case 33:this.$=[o[a-2],o[a]];break;case 34:this.$=new s.PartialNameNode(o[a],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(o[a],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(o[a],this._$));break;case 37:this.$=new s.DataNode(o[a],this._$);break;case 38:this.$=new s.IdNode(o[a],this._$);break;case 39:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 40:this.$=[{part:o[a]}];break;case 43:this.$=[];break;case 44:o[a-1].push(o[a]);break;case 47:this.$=[o[a]];break;case 48:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=i.lexer.lex()||1,"number"!=typeof t&&(t=i.symbols_[t]||t),t}var i=this,n=[0],s=[null],r=[],o=this.table,a="",l=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;r.push(h);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,m,g,v,b,y,_,w,k={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===d||"undefined"==typeof d)&&(d=e()),g=o[m]&&o[m][d]),"undefined"==typeof g||!g.length||!g[0]){var x="";if(!c){w=[];for(b in o[m])this.terminals_[b]&&b>2&&w.push("'"+this.terminals_[b]+"'");x=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+d);switch(g[0]){case 1:n.push(d),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(g[1]),d=null,f?(d=f,f=null):(u=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(y=this.productions_[g[1]][1],k.$=s[s.length-y],k._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},p&&(k._$.range=[r[r.length-(y||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(k,a,u,l,this.yy,g[1],s,r),"undefined"!=typeof v)return v;y&&(n=n.slice(0,2*-1*y),s=s.slice(0,-1*y),r=r.slice(0,-1*y)),n.push(this.productions_[g[1]][0]),s.push(k.$),r.push(k._$),_=o[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,i,n,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(i=this._input.match(this.rules[r[o]]),!i||e&&!(i[0].length>e[0].length)||(e=i,n=o,this.options.flex));o++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,i,n){function s(t,i){return e.yytext=e.yytext.substr(t,e.yyleng-i)}switch(i){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return i.lexer=n,e.prototype=i,i.Parser=e,new e}();return t=e}(),l=function(t,e){"use strict";function i(t){return t.constructor===r.ProgramNode?t:(s.yy=r,s.parse(t))}var n={},s=t,r=e;return n.parser=s,n.parse=i,n}(a,o),u=function(t){"use strict";function e(){}function i(t,e,i){if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n=i.parse(t),s=(new i.Compiler).compile(n,e);return(new i.JavaScriptCompiler).compile(s,e)}function n(t,e,i){function n(){var n=i.parse(t),s=(new i.Compiler).compile(n,e),r=(new i.JavaScriptCompiler).compile(s,e,void 0,!0);return i.template(r)}if(null==t||"string"!=typeof t&&t.constructor!==i.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var s;return function(t,e){return s||(s=n()),s.call(this,t,e)}}var s={},r=t;return s.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,i,n=this.opcodes,s=[],r=0,o=n.length;o>r;r++)if(t=n[r],"DECLARE"===t.opcode)s.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)i=t.args[a],"string"==typeof i&&(i='"'+i.replace("\n","\\n")+'"'),e.push(i);s.push(t.opcode+" "+e.join(" "))}return s.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var i=0;e>i;i++){var n=this.opcodes[i],s=t.opcodes[i];if(n.opcode!==s.opcode||n.args.length!==s.args.length)return!1;for(var r=0;r<n.args.length;r++)if(n.args[r]!==s.args[r])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(i=0;e>i;i++)if(!this.children[i].equals(t.children[i]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var i=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},i)for(var n in i)this.options.knownHelpers[n]=i[n];
return this.accept(t)},accept:function(t){var e,i=t.strip||{};return i.left&&this.opcode("strip"),e=this[t.type](t),i.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,i=0,n=e.length;n>i;i++)this.accept(e[i]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,i=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||i.usePartial,this.children[n]=i;for(var s=0,r=i.depths.list.length;r>s;s++)e=i.depths.list[s],2>e||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,i=t.program,n=t.inverse;i&&(i=this.compileProgram(i)),n&&(n=this.compileProgram(n));var s=e.sexpr,r=this.classifySexpr(s);"helper"===r?this.helperSexpr(s,i,n):"simple"===r?(this.simpleSexpr(s),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,i,n),this.opcode("pushProgram",i),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,i,n=t.pairs;this.opcode("pushHash");for(var s=0,r=n.length;r>s;s++)e=n[s],i=e[1],this.options.stringParams?(i.depth&&this.addDepth(i.depth),this.opcode("getContext",i.depth||0),this.opcode("pushStringParam",i.stringModeValue,i.type),"sexpr"===i.type&&this.sexpr(i)):this.accept(i),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(t,e,i){var n=t.id,s=n.parts[0],r=null!=e||null!=i;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",i),this.opcode("invokeAmbiguous",s,r)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,i){var n=this.setupFullMustacheParams(t,e,i),s=t.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",n.length,s);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+s,t);this.opcode("invokeHelper",n.length,s,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var i=1,n=t.parts.length;n>i;i++)this.opcode("lookup",t.parts[i])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new r("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,i=0,n=e.length;n>i;i++)this.opcode("lookup",e[i])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,i=t.eligibleHelper,n=this.options;if(i&&!e){var s=t.id.parts[0];n.knownHelpers[s]?e=!0:n.knownHelpersOnly&&(i=!1)}return e?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e,i=t.length;i--;)e=t[i],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,i){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",i),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}},s.precompile=i,s.compile=n,s}(i),c=function(t,e){"use strict";function i(t){this.value=t}function n(){}var s,r=t.COMPILER_REVISION,o=t.REVISION_CHANGES,a=t.log,l=e;n.prototype={nameLookup:function(t,e){var i,s;return 0===t.indexOf("depth")&&(i=!0),s=/^[0-9]+$/.test(e)?t+"["+e+"]":n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+s+")":s},compilerInfo:function(){var t=r,e=o[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,i,n){this.environment=t,this.options=e||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var s,r=t.opcodes;this.i=0;for(var o=r.length;this.i<o;this.i++)s=r[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(n)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,i="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(i=i+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(i+=" data = data || {};"),t.push(i)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var i in this.context.aliases)this.context.aliases.hasOwnProperty(i)&&(this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var n=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,r=this.environment.depths.list.length;r>s;s++)n.push("depth"+this.environment.depths.list[s]);var o=this.mergeSource();if(this.isChild||(o=this.compilerInfo()+o),t)return n.push(o),Function.apply(this,n);var l="function "+(this.name||"")+"("+n.join(",")+") {\n  "+o+"}";return a("debug",l+"\n\n"),l},mergeSource:function(){for(var t,e="",i=0,n=this.source.length;n>i;i++){var s=this.source[i];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e,i){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var n=this.lastHelper=this.setupHelper(t,e,!0),s=this.nameLookup("depth"+this.lastContext,e,"context"),r="helper = "+n.name+" || "+s;n.paramsInit&&(r+=","+n.paramsInit),this.push("("+r+",helper "+"? helper.call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+"))"),i||this.flushInline()},invokeKnownHelper:function(t,e){var i=this.setupHelper(t,e);this.push(i.name+".call("+i.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var i=this.setupHelper(0,t,e),n=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),r=this.nextStack();i.paramsInit&&this.pushSource(i.paramsInit),this.pushSource("if (helper = "+n+") { "+r+" = helper.call("+i.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+r+" = typeof helper === functionType ? helper.call("+i.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,i,n=this.popStack();this.options.stringParams&&(i=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),i&&s.types.push("'"+t+"': "+i),s.values.push("'"+t+"': ("+n+")")},compiler:n,compileChildren:function(t,e){for(var i,n,s=t.children,r=0,o=s.length;o>r;r++){i=s[r],n=new this.compiler;var a=this.matchExistingProgram(i);null==a?(this.context.programs.push(""),a=this.context.programs.length,i.index=a,i.name="program"+a,this.context.programs[a]=n.compile(i,e,this.context),this.context.environments[a]=i):(i.index=a,i.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,i=this.context.environments.length;i>e;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,i=this.environment.children[t],n=i.depths.list,s=[i.index,i.name,"data"],r=0,o=n.length;o>r;r++)e=n[r],1===e?s.push("depth0"):s.push("depth"+(e-1));return(0===n.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new i(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,n,s,r="",o=this.isInline();if(o){var a=this.popStack(!0);if(a instanceof i)e=a.value,s=!0;else{n=!this.stackSlot;var l=n?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+a+"),",e=this.topStack()}}else e=this.topStack();var u=t.call(this,e);return o?(s||this.popStack(),n&&this.stackSlot--,this.push("("+r+u+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+r+u+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var s=t[e];s instanceof i?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof i)return n.value;if(!e){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return n},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,n=e[e.length-1];return!t&&n instanceof i?n.value:n},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,i){var n=[],s=this.setupParams(t,n,i),r=this.nameLookup("helpers",e,"helper");return{params:n,paramsInit:s,name:r,callParams:["depth0"].concat(n).join(", "),helperMissingParams:i&&["depth0",this.quotedString(e)].concat(n).join(", ")}},setupOptions:function(t,e){var i,n,s,r=[],o=[],a=[];r.push("hash:"+this.popStack()),this.options.stringParams&&(r.push("hashTypes:"+this.popStack()),r.push("hashContexts:"+this.popStack())),n=this.popStack(),s=this.popStack(),(s||n)&&(s||(this.context.aliases.self="this",s="self.noop"),n||(this.context.aliases.self="this",n="self.noop"),r.push("inverse:"+n),r.push("fn:"+s));for(var l=0;t>l;l++)i=this.popStack(),e.push(i),this.options.stringParams&&(a.push(this.popStack()),o.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+o.join(",")+"]"),r.push("types:["+a.join(",")+"]")),this.options.data&&r.push("data:data"),r},setupParams:function(t,e,i){var n="{"+this.setupOptions(t,e).join(",")+"}";return i?(this.useRegister("options"),e.push("options"),"options="+n):(e.push(n),"")}};for(var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=n.RESERVED_WORDS={},h=0,p=u.length;p>h;h++)c[u[h]]=!0;return n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},s=n}(n,i),h=function(t,e,i,n,s){"use strict";var r,o=t,a=e,l=i.parser,u=i.parse,c=n.Compiler,h=n.compile,p=n.precompile,d=s,f=o.create,m=function(){var t=f();return t.compile=function(e,i){return h(e,i,t)},t.precompile=function(e,i){return p(e,i,t)},t.AST=a,t.Compiler=c,t.JavaScriptCompiler=d,t.Parser=l,t.parse=u,t};return o=m(),o.create=m,r=o}(r,o,l,u,c);return h}();return t}),define("templates/helpers/icon",["Handlebars"],function(t){"use strict";function e(t,e,n){return t=i(t),e=i(e),n=i(n),'<i class="icon icon_'+t+" "+(n||"")+'">'+(e?"<span class=screen-reader-text>"+e+"</span>":"")+"</i>"}var i=t.Utils.escapeExpression;return t.registerHelper("icon",function(i,n,s){return new t.SafeString(e(i,n,s))}),e}),define("templates/helpers/pageNav",["Handlebars","templates/helpers/icon"],function(t,e){"use strict";function i(t,i){var n="";i!==!1&&(i=!0);var s='<a href="#prev" class=page-nav__prev>'+e("arrow-alt-left","Prev","page-nav__prev__icon")+"</a>",r='<a href="#next" class=page-nav__next>'+e("arrow-alt-right","Next","page-nav__next__icon")+"</a>";n+="<div class=page-nav>"+(i?s:"")+'<ul class="sl page-nav__dots">';for(var o=-1;++o<t;)n+='<li data-pageno="'+o+'" class="page-nav__dot">'+'<a href="#" class="page-nav__dot__link">'+e("page-dot-off","Page "+(o+1),"page-nav__dot__icon")+"</a>"+"</li>";return n+="</ul>"+(i?r:"")+"</div>"}return t.registerHelper("pageNav",function(e,n){return new t.SafeString(i(e,n))}),i}),define("lib/Timer",["jquery","lodash"],function(t,e){"use strict";function i(e){this._intervalPeriod=e.interval||n,this._delayPeriod=e.delay||this._intervalPeriod,this._callbacks=new t.Callbacks}var n=3e3,s=window;return e.extend(i.prototype,{_advance:function(){this._stopped||(this._callbacks.fire(),this._passedDelay||(this._passedDelay=!0,this.start()))},start:function(){this._passedDelay?this._intervalId||(this._intervalId=s.setInterval(e.bind(this._advance,this),this._intervalPeriod)):this._timeoutId||(this._timeoutId=s.setTimeout(e.bind(this._advance,this),this._delayPeriod)),this._stopped=!1},stop:function(){this._stopped=!0,this._timeoutId&&(s.clearTimeout(this._timeoutId),this._timeoutId=null),this._intervalId&&(s.clearInterval(this._intervalId),this._intervalId=null)},add:function(t){return this._callbacks.add(t)},remove:function(t){return this._callbacks.remove(t)}}),i}),define("deferLink",["jquery"],function(t){"use strict";function e(t){return function(e){return i.call(this,e,t)}}function i(e,i){function n(){var t=+s.data(a)-1;s.data(a,t),0>=t&&!s.data(u)&&(c.location.href=h)}var s="A"===this.nodeName?t(this):t(e.target).closest("a"),h=s.attr("href"),p=s.attr("target"),d=s.length&&h&&1===e.which&&!e.metaKey&&!e.shiftKey,f=i;if(t.isFunction(i)&&(f=i.call(this,e),f===!1))return!1;d&&e.isDefaultPrevented()&&!s.data(a)&&(d=!1),d&&p&&"_self"!==p&&(d=!1),d&&o&&s.is("[download]")&&(d=!1),d&&s.hasClass(r)&&(d=!1);var m=+(s.data(a)||0);d&&(s.data(a,m+1),f.when?("resolved"===f.state()&&n(),f.done(n)):t.isNumeric(f)?c.setTimeout(n,f):(d=!1,s.data(a,m))),d&&!m&&(e.preventDefault(),s.data(l,!0))}function n(n){return n.when||t.isNumeric(n)||t.isFunction(n)?e(n):(i.call(this,n,s),void 0)}var s=50,r="no-defer",o="download"in document.createElement("a"),a="defer-link-pends",l="defer-link-preventable",u="defer-link-prevented",c=window,h=t.Event.prototype.preventDefault;return t.Event.prototype.preventDefault=function(){var e=t(this.target);return e.data(l)&&e.data(u,!0),h.apply(this,Array.prototype.slice.call(arguments))},n}),define("utils/applyAll",["jquery"],function(t){"use strict";function e(i,n,s){var r,o;for(r=0,o=n.length;o>r;r++)t.isArray(n[r])?e(i,n[r],s):n[r].apply(i,s)}return e}),define("utils/throwError",[],function(){"use strict";return function(t){throw new Error("Error in TED: "+t)}}),define("lib/pubSub",["jquery","utils/applyAll","utils/throwError"],function(t,e,i){"use strict";function n(t){var n={publish:t.fire,subscribe:t.add,unsubscribe:t.remove},s=null;t.add(function(t){s=t}),n.read=function(){return s};var r;return n.publishUnique=function(){if(!window.JSON)return i("JSON object not available. You may need to shim it on this client."),!1;var e=Array.prototype.slice.call(arguments,0),n=JSON.stringify(e);n!==r&&(t.fire.apply(t,e),r=n)},n.once=function(){function i(){e(t,n,arguments),t.remove(i)}var n=arguments;return t.add(i)},n.future=function(){function i(){r&&e(t,s,arguments)}var n,s=arguments,r=!1;return n=t.add(i),r=!0,n},n}function s(e){var i,s=e&&r[e];return s||(i=t.Callbacks("memory"),s=n(i),e&&(r[e]=s)),s}var r={};return s._reset=function(){r={}},s}),define("lib/resize",["jquery","lodash","lib/pubSub"],function(t,e,i){"use strict";function n(t){for(var e,n=p;n--;)!e&&t>=h[n].at&&(e=h[n].its);i("sizeGroup").publishUnique(e)}function s(){var t=0,e=c;if(r=window.innerHeight,o=window.innerWidth||document.documentElement.clientWidth,u)t=l;else for(;e--;)!t&&o>=a[e]&&(t=a[e]);i("breakpoint").publishUnique(t),i("height").publishUnique(r),i("width").publishUnique(o)}var r,o,a=[320,480,600,768,1024,1200],l=1024,u=t("html").is(".oldie"),c=a.length,h=[{at:0,its:"oh"},{at:480,its:"xs"},{at:768,its:"sm"},{at:1024,its:"lg"}],p=h.length;return t(window).on("resize",e.throttle(s,100)),s(),i("breakpoint").subscribe(n),i}),define("lib/ga",["jquery","lodash","deferLink","lib/pubSub","lib/resize"],function(t,e,i,n){"use strict";function s(){var t=a.slice.call(arguments),n=this;return function(s){return n.apply(u,t),e.has(s,"originalEvent")&&e.has(this,"nodeName")&&"click"===s.type?i.call(this,s):void 0}}function r(){var t,e=0;n("breakpoint").subscribe(function(i){u("set","dimension1",i),e++?u.sendEvent("breakpoint","change",t+"|"+i,e):u.send("pageview"),t=i})}function o(e){var i=t(this),n="ga-";e=t.extend(e||{},{category:i.data(n+"category"),action:i.data(n+"action"),label:i.data(n+"label")}),u.sendEvent(e.category,e.action,e.label)}var a=[],l=window,u=l[l.GoogleAnalyticsObject];return e.assign(u,{send:e.partial(u,"send"),set:e.partial(u,"set"),sendEvent:e.partial(u,"send","event"),sendSocial:e.partial(u,"send","social")},function(t,e){return e.recall=s,e}),r(),t(function(){t(document).on("click","a.ga-link",i(function(){return o.call(this,{action:"click",category:"site.link",label:this.href}),50}))}),u}),define("global/links",["jquery","deferLink","lib/ga"],function(t,e,i){"use strict";function n(t){if(t.match(location.origin))return!1;for(var e=-1;++e<a;)if(t.match(o[e].re))return o[e]}function s(e,i,n){e=t.extend({},l,e);for(var s in e)e.hasOwnProperty(s)&&t.isFunction(e[s])&&(e[s]=e[s].call(i,n));return e}function r(t){var r=n(this.href);return r?(i.send(s(r,this,t)),e.call(this,t)):!0}var o=[{re:/^https?:\/\/(?:.*\.)tedprize\.org/,eventCategory:"link.outbound.tedPrize"},{re:/^https?:\/\/ed\.ted\.com/,eventCategory:"link.outbound.tedEd"},{re:/^https?:\/\/tedfellows\.posterous\.com/,eventCategory:"link.outbound.fellowsBlog"},{re:/^https?:\/\/(?:.*\.)universalsubtitles\.org/,eventCategory:"link.outbound.translatorDashboard"},{re:/^https?:\/\/(?:.*\.)feedburner\.com/,eventCategory:"link.outbound.feedburner"},{re:/^https?:\/\//}],a=o.length,l={hitType:"event",eventCategory:"link.outbound.other",eventAction:"click",eventLabel:function(){return this.href}};return{init:function(){t("body").on("click","a[href]",r)}}}),define("lib/newsletter",["jquery"],function(t){"use strict";function e(e){var i=[];return e.isDaily&&i.push("daily"),e.isWeekly&&i.push("weekly"),e.isFellows&&i.push("fellows"),t.getJSON("//www.ted.com/newsletter/signup.json?callback=?",{newsletterSignup:{email_address:e.email,subscription_list:i}})}function i(i){function s(t){"error"===t.status?l.rejectWith(i,[["uncaught"]]):l.resolveWith(i)}function r(){l.rejectWith(i,[["server"]])}function o(){e(i).then(s,r)}function a(t){l.rejectWith(this,[t])}var l=new t.Deferred;return n(i).then(o,a),l}function n(e){var i=[],n=new t.Deferred;return(""+e.email).match(/.+@.+/)||i.push("email"),e.isDaily||e.isWeekly||e.isFellows||i.push("subscription"),i.length?n.rejectWith(e,[i]):n.resolveWith(e),n.promise()}return{ajax:e,subscribe:i,validate:n}}),define("global/subscribe",["jquery","lodash","lib/newsletter","lib/ga"],function(t,e,i,n){"use strict";function s(t){m(),n.sendEvent("newsletter","submit","footer"),a={email:h.val(),isDaily:u.is(":checked"),isWeekly:c.is(":checked")},i.subscribe(a).then(r,o),t.preventDefault()}function r(){n.sendEvent("newsletter","success",e.filter([a.isDaily?"daily":!1,a.isWeekly?"weekly":!1]).join(",")),t(d+"-details").slideUp(f),t(d+"-success").slideDown(f)}function o(e){p.slideUp(f),t(d+"-error-"+e[0]).slideDown(f)}var a,l,u,c,h,p,d="#newsletter-signup",f="fast",m=e.once(function(){u=t(d+"-daily"),c=t(d+"-weekly"),h=t(d+"-email"),p=l.find("p.footer-newsletter__error")});return{init:function(){l=t(d),l.on("submit",s)}}}),function(t){"use strict";var e=function(t,i,n){return 1===arguments.length?e.get(t):e.set(t,i,n)};e._document=document,e._navigator=navigator,e.defaults={path:"/"},e.get=function(t){return e._cachedDocumentCookie!==e._document.cookie&&e._renewCache(),e._cache[t]},e.set=function(i,n,s){return s=e._getExtendedOptions(s),s.expires=e._getExpiresDate(n===t?-1:s.expires),e._document.cookie=e._generateCookieString(i,n,s),e},e.expire=function(i,n){return e.set(i,t,n)},e._getExtendedOptions=function(i){return{path:i&&i.path||e.defaults.path,domain:i&&i.domain||e.defaults.domain,expires:i&&i.expires||e.defaults.expires,secure:i&&i.secure!==t?i.secure:e.defaults.secure}},e._isValidDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},e._getExpiresDate=function(t,i){switch(i=i||new Date,typeof t){case"number":t=new Date(i.getTime()+1e3*t);break;case"string":t=new Date(t)}if(t&&!e._isValidDate(t))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return t},e._generateCookieString=function(t,e,i){t=encodeURIComponent(t),e=(e+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),i=i||{};var n=t+"="+e;return n+=i.path?";path="+i.path:"",n+=i.domain?";domain="+i.domain:"",n+=i.expires?";expires="+i.expires.toGMTString():"",n+=i.secure?";secure":""},e._getCookieObjectFromString=function(i){for(var n={},s=i?i.split("; "):[],r=0;r<s.length;r++){var o=e._getKeyValuePairFromCookieString(s[r]);n[o.key]===t&&(n[o.key]=o.value)}return n},e._getKeyValuePairFromCookieString=function(t){var e=t.indexOf("=");return e=0>e?t.length:e,{key:decodeURIComponent(t.substr(0,e)),value:decodeURIComponent(t.substr(e+1))}},e._renewCache=function(){e._cache=e._getCookieObjectFromString(e._document.cookie),e._cachedDocumentCookie=e._document.cookie},e._areEnabled=function(){return e._navigator.cookieEnabled||"1"===e.set("cookies.js",1).get("cookies.js")},e.enabled=e._areEnabled(),"function"==typeof define&&define.amd?define("Cookies",[],function(){return e}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.Cookies=e):window.Cookies=e}(),define("global/retirement",["jquery","Cookies"],function(t,e){"use strict";return{init:function(){t("#retirement-retirement").on("click",function(i){i.preventDefault(),t("#retirement").slideUp("fast"),e.expire("v2",{domain:"ted.com",path:"/"})})}}}),define("global/navs",["jquery","lib/ga","lib/pubSub","lib/resize"],function(t,e,i){"use strict";function n(){var n=i("breakpoint").read()>=1024,s=t(this),a=s.closest("li.nav__item"),l=a.siblings(),u=a.children(r),c=a.hasClass(o),h=s.data("ga-label");if(!a.hasClass("nav__item--disabled")&&(a[n?"addClass":"toggleClass"](o),l.removeClass(o),u.length&&(!c&&h&&a.hasClass(o)&&e.sendEvent("navigation.menu","open",h),a.closest("div.shoji-fixture").length||!n)))return l.children(r).stop(!0,!0).animate({height:"hide"},200),u.stop(!0,!0).animate({height:"toggle"},200),!1}var s={},r="div.nav__folder",o="nav__item--active";return s.init=function(){t(document).on("click","a.nav__link",n)},s}),define("Modernizr",[],function(){"use strict";return window.Modernizr}),define("lib/shoji",["jquery","lodash","Modernizr","lib/pubSub","utils/throwError","lib/resize"],function(t,e,i,n,s){"use strict";function r(e){var i=t(e);return i.hasClass(f)||(i=i.closest("div."+f)),i.length||s("Could not find fixture "+e),i}function o(i,n){var s=t("<div class="+f+">"),r={};return e.defaults(r,n,{at:"left"}),b(),s.addClass(f+"--"+r.at),s.data("at",r.at),s.append(i),s.appendTo(p),s}function a(){return b(),i.csstransforms3d&&d>=320}function l(){b(),t(document.activeElement).blur(),h.removeClass(m+" "+g)}function u(t){var e=r(t);b(),p.children().removeClass(v),e.addClass(v),c(e.data("at"))}function c(t){l(),h.addClass("shoji--opened shoji--"+t)}var h,p,d,f="shoji__fixture",m="shoji--left",g="shoji--right",v=f+"--revealed",b=e.once(function(){h=t("#shoji"),p=t("#shoji-fixtures"),t("#shoji-lattice").on("click",function(){return l(),!1}),n("breakpoint").subscribe(function(t){d=t})});return{_getFixture:r,_init:b,addFixture:o,canSlide:a,concealFixture:l,revealFixture:u,slide:c}}),define("jqueryui/widget",["jquery"],function(){return function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(r){}s(e)},t.widget=function(e,i,n){var s,r,o,a,l={},u=e.split(".")[0];e=e.split(".")[1],s=u+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[u]=t[u]||{},r=t[u][e],o=t[u][e]=function(t,e){return this._createWidget?(arguments.length&&this._createWidget(t,e),void 0):new o(t,e)},t.extend(o,r,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,r=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=r,e}}(),void 0):(l[e]=n,void 0)}),o.prototype=t.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||e:e},l,{constructor:o,namespace:u,widgetName:e,widgetFullName:s}),r?(t.each(r._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,o,i._proto)}),delete r._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(i){for(var s,r,o=n.call(arguments,1),a=0,l=o.length;l>a;a++)for(s in o[a])r=o[a][s],o[a].hasOwnProperty(s)&&r!==e&&(i[s]=t.isPlainObject(r)?t.isPlainObject(i[s])?t.widget.extend({},i[s],r):t.widget.extend({},r):r);return i},t.widget.bridge=function(i,s){var r=s.prototype.widgetFullName||i;t.fn[i]=function(o){var a="string"==typeof o,l=n.call(arguments,1),u=this;return o=!a&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,a?this.each(function(){var n,s=t.data(this,r);return s?t.isFunction(s[o])&&"_"!==o.charAt(0)?(n=s[o].apply(s,l),n!==s&&n!==e?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,r);e?e.option(o||{})._init():t.data(this,r,new s(o,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")
},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,r,o,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(r=a[i]=t.widget.extend({},this.options[i]),o=0;o<s.length-1;o++)r[s[o]]=r[s[o]]||{},r=r[s[o]];if(i=s.pop(),1===arguments.length)return r[i]===e?null:r[i];r[i]=n}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var s,r=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,o){function a(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var l=n.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?s.delegate(c,u,a):i.bind(u,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,r,o=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(s in r)s in i||(i[s]=r[s]);return this.element.trigger(i,n),!(t.isFunction(o)&&o.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,r){"string"==typeof s&&(s={effect:s});var o,a=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),o=!t.isEmptyObject(s),s.complete=r,s.delay&&n.delay(s.delay),o&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}})}(jQuery),jQuery}),define("widgets/fixture",["jquery","lodash","lib/shoji","jqueryui/widget"],function(t,e,i){"use strict";var n,s=e.once(function(){n=t("body,html")});return t.widget("ted.fixture",{options:{at:"left",autoReveal:!0,scrollAnimationDuration:200},_create:function(){s(),this.fixture=i.addFixture(this.element.remove(),{at:this.options.at}),this.options.autoReveal&&this.reveal()},reveal:function(){this.options.scrollAnimationDuration&&n.scrollTop()&&n.animate({scrollTop:0},this.options.scrollAnimationDuration),i.revealFixture(this.fixture)},conceal:function(){i.concealFixture()}}),function(e,i){return t(e).fixture(i)}}),define("menuAim",["jquery"],function(t){"use strict";function e(e){var i=t(this),n=null,s=[],r=null,o=null,a=t.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:t.noop,exit:t.noop,activate:t.noop,deactivate:t.noop,exitMenu:t.noop},e),l=3,u=300,c=200,h=function(t){s.push({x:t.pageX,y:t.pageY}),s.length>l&&s.shift()},p=function(){o&&clearTimeout(o),a.exitMenu(this)&&(n&&a.deactivate(n),n=null)},d=function(){o&&clearTimeout(o),a.enter(this),v(this)},f=function(){a.exit(this)},m=function(){g(this)},g=function(t){t!==n&&(n&&a.deactivate(n),a.activate(t),n=t)},v=function(t){var e=b();null===e?o=setTimeout(function(){g(t)},c):e?o=setTimeout(function(){v(t)},e):g(t)},b=function(){function e(t,e){return(e.y-t.y)/(e.x-t.x)}if(!n||!t(n).is(a.submenuSelector))return null;var o=i.offset(),l={x:o.left,y:o.top-a.tolerance},c={x:o.left+i.outerWidth(),y:l.y},h={x:o.left,y:o.top+i.outerHeight()+a.tolerance},p={x:o.left+i.outerWidth(),y:h.y},d=s[s.length-1],f=s[0];if(!d)return 0;if(f||(f=d),f.x<o.left||f.x>p.x||f.y<o.top||f.y>p.y)return 0;if(r&&d.x===r.x&&d.y===r.y)return 0;var m=c,g=p;"left"===a.submenuDirection?(m=h,g=l):"below"===a.submenuDirection?(m=p,g=h):"above"===a.submenuDirection&&(m=l,g=c);var v=e(d,m),b=e(d,g),y=e(f,m),_=e(f,g);return y>v&&b>_?(r=d,u):(r=null,0)};i.mouseleave(p).find(a.rowSelector).mouseenter(d).mouseleave(f).on("touchend",function(e){n&&t(n).is(a.submenuSelector)||(e.preventDefault(),m.apply(this,Array.prototype.slice.call(arguments,0)))}).click(m),t(document).mousemove(h)}return t.fn.menuAim=function(t){return this.each(function(){e.call(this,t)}),this},t}),define("global/mainNav",["jquery","lodash","lib/shoji","lib/pubSub","lib/ga","lib/resize","widgets/fixture","menuAim"],function(t,e,i,n,s){"use strict";function r(e){e.preventDefault(),i.canSlide()?l?l.fixture("reveal"):(l=t("#banner-core").clone(),l.find("nav.nav--main").removeClass("nav--main"),l.add("*[id]",l).removeAttr("id"),l.show(),l.fixture()):t("#main-nav").toggleClass("nav--main--open")}function o(e){1024>e||(n("breakpoint").unsubscribe(o),t("#main-nav").find("ul:first > li > a").each(function(){var e=t(this);t('<span class="nav__link nav__link--placeholder" aria-hidden></span>').text(e.text()).insertAfter(e),e.addClass("nav__link--placeheld")}))}function a(){function i(){l=!0,f.trigger("mouseleave")}function r(){return p.read()>=1024}function o(n){1024>n||(p.unsubscribe(o),f.menuAim({activate:function(e){var i=t(e),n=i.find("a.nav__link"),o=n.data("ga-label");return r()?(o&&!i.hasClass(u)&&s.sendEvent("navigation.menu","open",o),i.addClass(u).removeClass(c),m.addClass(h),void 0):!1},deactivate:function(e){return r()?(t(e).removeClass(u).removeClass(c),m.removeClass(h),void 0):!1},exitMenu:function(n){return r()?l?(l=!1,!0):(t(n).find("li."+u).addClass(c),a=e.delay(i,d),!1):!1},enter:function(e){return r()?(t(e).removeClass(c),clearTimeout(a),a=null,void 0):!1},submenuDirection:"below"}),m.on("click",i))}var a,l,u="nav__item--active",c="nav__item--deactivating",h="main-nav-screen--active",p=n("breakpoint"),d=250,f=t(this).children("ul"),m=t("#main-nav-screen");n("breakpoint").subscribe(o)}var l,u={};return u.init=function(){n("breakpoint").subscribe(o),t("#main-nav-toggle").on("click",r),t("nav.nav--main").each(a)},u}),define("hbs/underscore",{}),define("hbs/i18nprecompile",["hbs/handlebars","hbs/underscore"],function(t,e){function i(n,s,r){return r=r||{},s=s||{},n&&"program"===n.type&&n.statements&&(e(n.statements).forEach(function(e,o){var a="<!-- i18n error -->";if("mustache"===e.type&&e.id&&"$"===e.id.original){if(e.params.length&&e.params[0].string){var l=e.params[0].string;a=s[l]||(r.originalKeyFallback?l:a)}n.statements[o]=new t.AST.ContentNode(a)}else e.program&&(e.program=i(e.program,s,r))}),n.inverse&&i(n.inverse,s,r)),n}return function(e,n,s){s=s||{};var r,o;return r=t.parse(e),n!==!1&&(r=i(r,n,s)),o=(new t.Compiler).compile(r,s),(new t.JavaScriptCompiler).compile(o,s)}}),function(window){var JSON=window.JSON||{};!function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,s,r,o,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,i=0;r>i;i+=1)o[i]=str(i,l)||"null";return s=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(r=rep.length,i=0;r>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],s=str(n,l),s&&o.push(quote(n)+(gap?": ":":")+s));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(s=str(n,l),s&&o.push(quote(n)+(gap?": ":":")+s));return s=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n=walk(s,i),void 0!==n?s[i]=n:delete s[i]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("hbs/json2",[],function(){return JSON})}.call(this,this),define("hbs",{load:function(t){throw new Error("Dynamic load not allowed: "+t)}}),define("templates/helpers/t",["Handlebars"],function(t){"use strict";t.registerHelper("t",function(t){return t})}),define("hbs!templates/login",["hbs","hbs/handlebars","templates/helpers/t"],function(t,e){var i=e.template(function(t,e,i){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var n,s,r="",o=i.helperMissing,a=this.escapeExpression;return r+='\n\n<div class="login-form">\n  <form class="form-vertical" action="https://auth.ted.com/session" method="post">\n    <label class="form-group">\n      <span class="control-label">'+a((n=i.t||e&&e.t,s={hash:{}},n?n.call(e,"Email:",s):o.call(e,"t","Email:",s)))+'</span>\n      <input class="form-control" name="user[email]" type="email">\n    </label>\n\n    <label class="form-group">\n      <span class="control-label">'+a((n=i.t||e&&e.t,s={hash:{}},n?n.call(e,"Password:",s):o.call(e,"t","Password:",s)))+'</span>\n      <input class="form-control" name="user[password]" type="password">\n    </label>\n\n    <div class="form-group">\n      <input class="button button--dark button--wide" type="submit" value="Log in">\n\n      <div>\n        <a class="l3" href="https://auth.ted.com/account/password/new">'+a((n=i.t||e&&e.t,s={hash:{}},n?n.call(e,"Need help logging in?",s):o.call(e,"t","Need help logging in?",s)))+'</a>\n      </div>\n    </div>\n  </form>\n\n  <div class="login-form__or"></div>\n\n  <div>\n    <a class="button button--wide button--dark button--facebook" href="/account/auth/facebook">'+a((n=i.t||e&&e.t,s={hash:{}},n?n.call(e,"Log in with Facebook",s):o.call(e,"t","Log in with Facebook",s)))+"</a>\n  </div>\n\n  <div>\n    "+a((n=i.t||e&&e.t,s={hash:{}},n?n.call(e,"Don't have a TED account?",s):o.call(e,"t","Don't have a TED account?",s)))+'\n    <a class="l3" href="https://auth.ted.com/users/new">'+a((n=i.t||e&&e.t,s={hash:{}},n?n.call(e,"Sign up",s):o.call(e,"t","Sign up",s)))+"</a>\n  </div>\n</div>\n"});return i}),define("jqueryui/position",["jquery"],function(){return function(t,e){function i(t,e,i){return[parseFloat(t[0])*(d.test(t[0])?e/100:1),parseFloat(t[1])*(d.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var r,o=Math.max,a=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,d=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(r!==e)return r;var i,n,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return t("body").append(s),i=o.offsetWidth,s.css("overflow","scroll"),n=o.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),r=i-n},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,r="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:r?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var r,d,m,g,v,b,y=t(e.of),_=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(_),k=(e.collision||"flip").split(" "),x={};return b=s(y),y[0].preventDefault&&(e.at="left top"),d=b.width,m=b.height,g=b.offset,v=t.extend({},g),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=u.test(n[0])?n.concat(["center"]):c.test(n[0])?["center"].concat(n):["center","center"]),n[0]=u.test(n[0])?n[0]:"center",n[1]=c.test(n[1])?n[1]:"center",t=h.exec(n[0]),i=h.exec(n[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[p.exec(n[0])[0],p.exec(n[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===e.at[0]?v.left+=d:"center"===e.at[0]&&(v.left+=d/2),"bottom"===e.at[1]?v.top+=m:"center"===e.at[1]&&(v.top+=m/2),r=i(x.at,d,m),v.left+=r[0],v.top+=r[1],this.each(function(){var s,u,c=t(this),h=c.outerWidth(),p=c.outerHeight(),f=n(this,"marginLeft"),b=n(this,"marginTop"),S=h+f+n(this,"marginRight")+w.width,E=p+b+n(this,"marginBottom")+w.height,C=t.extend({},v),T=i(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=h:"center"===e.my[0]&&(C.left-=h/2),"bottom"===e.my[1]?C.top-=p:"center"===e.my[1]&&(C.top-=p/2),C.left+=T[0],C.top+=T[1],t.support.offsetFractions||(C.left=l(C.left),C.top=l(C.top)),s={marginLeft:f,marginTop:b},t.each(["left","top"],function(i,n){t.ui.position[k[i]]&&t.ui.position[k[i]][n](C,{targetWidth:d,targetHeight:m,elemWidth:h,elemHeight:p,collisionPosition:s,collisionWidth:S,collisionHeight:E,offset:[r[0]+T[0],r[1]+T[1]],my:e.my,at:e.at,within:_,elem:c})}),e.using&&(u=function(t){var i=g.left-C.left,n=i+d-h,s=g.top-C.top,r=s+m-p,l={target:{element:y,left:g.left,top:g.top,width:d,height:m},element:{element:c,left:C.left,top:C.top,width:h,height:p},horizontal:0>n?"left":i>0?"right":"center",vertical:0>r?"top":s>0?"bottom":"middle"};h>d&&a(i+n)<d&&(l.horizontal="center"),p>m&&a(s+r)<m&&(l.vertical="middle"),l.important=o(a(i),a(n))>o(a(s),a(r))?"horizontal":"vertical",e.using.call(this,t,l)}),c.offset(t.extend(C,{using:u}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,r=n.width,a=t.left-e.collisionPosition.marginLeft,l=s-a,u=a+e.collisionWidth-r-s;e.collisionWidth>r?l>0&&0>=u?(i=t.left+l+e.collisionWidth-r-s,t.left+=l-i):t.left=u>0&&0>=l?s:l>u?s+r-e.collisionWidth:s:l>0?t.left+=l:u>0?t.left-=u:t.left=o(t.left-a,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,r=e.within.height,a=t.top-e.collisionPosition.marginTop,l=s-a,u=a+e.collisionHeight-r-s;e.collisionHeight>r?l>0&&0>=u?(i=t.top+l+e.collisionHeight-r-s,t.top+=l-i):t.top=u>0&&0>=l?s:l>u?s+r-e.collisionHeight:s:l>0?t.top+=l:u>0?t.top-=u:t.top=o(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,r=s.offset.left+s.scrollLeft,o=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,u=t.left-e.collisionPosition.marginLeft,c=u-l,h=u+e.collisionWidth-o-l,p="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,d="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(i=t.left+p+d+f+e.collisionWidth-o-r,(0>i||i<a(c))&&(t.left+=p+d+f)):h>0&&(n=t.left-e.collisionPosition.marginLeft+p+d+f-l,(n>0||a(n)<h)&&(t.left+=p+d+f))},top:function(t,e){var i,n,s=e.within,r=s.offset.top+s.scrollTop,o=s.height,l=s.isWindow?s.scrollTop:s.offset.top,u=t.top-e.collisionPosition.marginTop,c=u-l,h=u+e.collisionHeight-o-l,p="top"===e.my[1],d=p?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>c?(n=t.top+d+f+m+e.collisionHeight-o-r,t.top+d+f+m>c&&(0>n||n<a(c))&&(t.top+=d+f+m)):h>0&&(i=t.top-e.collisionPosition.marginTop+d+f+m-l,t.top+d+f+m>h&&(i>0||a(i)<h)&&(t.top+=d+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,s,r,o=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in n)e.style[r]=n[r];e.appendChild(a),i=o||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=t(a).offset().left,t.support.offsetFractions=s>10&&11>s,e.innerHTML="",i.removeChild(e)}()}(jQuery),jQuery}),define("widgets/popup",["jquery","lodash","jqueryui/widget","jqueryui/position"],function(t,e){"use strict";function i(t,e){this.element.removeClass(o).css(t).addClass(s+e.horizontal+" "+s+("center"===e.vertical?"middle":e.vertical))}for(var n=300,s="popup--tailed--",r=["center","left","middle","right","bottom","top"],o="",a=r.length;a--;)o+=s+r[a]+" ";return t.widget("ted.popup",{options:{position:{my:"center bottom-20",at:"center top",of:window,collision:"fit flip"},inverse:!1,tail:!0},_create:function(){this.options.position.using||(this.options.position.using=e.bind(i,this)),this.element.addClass("popup"+(this.options.tail?" popup--tailed":"")+(this.options.inverse?" popup--inverse":" inverse"))},_isOpen:!1,open:function(t){var e=this;e._trigger("beforeOpen",t)!==!1&&(e.position(),e._isOpen=!0,e.element.removeClass("popup--hide").addClass("popup--show"),e._trigger("open"))},close:function(t){var e=this,i=e.element;e._trigger("beforeClose",t)!==!1&&(e._isOpen=!1,i.addClass("popup--hide"),setTimeout(function(){e._isOpen||i.removeClass("popup--show")},n),e._trigger("close"))},position:function(){this.element.addClass("popup--positioning").position(this.options.position).removeClass("popup--positioning")}}),function(e,i){return t(e).popup(i)}}),define("widgets/tooltip",["jquery","lodash","jqueryui/widget","widgets/popup"],function(t){"use strict";var e;return t.widget("ted.tooltip",{options:{content:"",interactive:!1,interactiveTolerance:350,position:{},openDelay:0,supportTouch:!0,allowClick:!1},_create:function(){var i;e||(e=t(document.body)),this.element.addClass("tooltip"),this.options.position.of=this.element,this.popupObject=t("<div class=tooltip__popup>").append(this.options.content).popup(this.options).insertAfter(this.element),i=this.element,this.options.interactive&&(i=i.add(this.popupObject)),this._on(i,this._handleEvents),this._on(t("#shoji"),{click:function(e){!this._isOpened||this.options.interactive&&t(e.target).closest(this.popupObject).length||(this._isOpened=!1,this.popupObject.popup("close"))}})},_isHoverClickEnabled:!1,_isFirstTouch:!1,_isTouched:!1,_isMousedOver:!1,_handleEvents:{touchstart:function(){this._isTouched=!0,this._isHoverClickEnabled||(this._isFirstTouch=!0)},mouseover:function(t){var e=this,i=e.options.openDelay||0;(this.options.supportTouch||!this._isTouched)&&(this._isMousedOver=!0,this._isOpened&&(i=0),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e._isMousedOver&&e.openPopup(t)},i))},mouseout:function(t){var e=this,i=this.options.interactiveTolerance||0;this._isMousedOver=!1,this._isOpened||(i=0),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e._isMousedOver||e.closePopup(t)},i)},click:function(e){t(e.target).closest(this.element).length&&((this.options.supportTouch||!this._isTouched)&&(this.openPopup(e),!this._isFirstTouch&&this._isHoverClickEnabled&&this._trigger("hoverclick",e),this._isFirstTouch=!1),this.options.allowClick||(e.preventDefault(),e.stopPropagation()))},popupopen:function(){this._isHoverClickEnabled=!0},popupclose:function(){this._isHoverClickEnabled=!1}},_setOption:function(t,e){"content"===t&&this.popupObject.html(e)},openPopup:function(t){this._isOpened=!0,this.popupObject.popup("open",t)},closePopup:function(t){this.popupObject.popup("close",t),this._off(e,"click"),this._isOpened=!1},popup:function(){return this.popupObject}}),function(e,i){return t(e).tooltip(i)}}),define("global/login",["jquery","lib/shoji","lib/pubSub","hbs!templates/login","lib/resize","widgets/fixture","widgets/tooltip"],function(t,e,i,n){"use strict";function s(s){var r=i("breakpoint").read()>=1024;if(u&&!r&&e.canSlide())return s.preventDefault(),a?(a.fixture("reveal"),void 0):(a=t(n()).fixture({at:"right"}),void 0)}function r(t){1024>t||u&&(i("breakpoint").unsubscribe(r),o.tooltip({content:n(),interactive:!0,position:{my:"right bottom-20",at:"right top",of:window,collision:"fit flip"},beforeOpen:function(){return i("breakpoint").read()>=1024}}))}var o,a,l={},u=!1;return l.init=function(){o=t("#login-link"),o.on("click",s),i("breakpoint").subscribe(r)},l}),function(t,e,i){"object"==typeof exports?module.exports=i():"function"==typeof define&&define.amd?define("depot",i):e[t]=i()}("depot",this,function(){"use strict";function t(t){return t&&JSON.parse(t)}function e(t,e){return t+"-"+e}function i(t,e){var i,n;if("function"==typeof t)i=t(e);else{i=!0;for(n in t)i&=t[n]===e[n]}return i}function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function s(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}function r(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function o(t,e){var i;if(e=r({idAttribute:"_id",storageAdaptor:localStorage},e),!e.storageAdaptor)throw new Error("No storage adaptor was found");return i=Object.create(a,{name:{value:t},idAttribute:{value:e.idAttribute},storageAdaptor:{value:e.storageAdaptor}}),i.refresh(),i}var a={save:function(t){var i,n;return this.refresh(),t[this.idAttribute]||(t[this.idAttribute]=s()),i=t[this.idAttribute]+"",this.ids.indexOf(i)<0&&(this.ids.push(i),n=this.ids.join(","),this.storageAdaptor.setItem(this.name,n),this.store=n),this.storageAdaptor.setItem(e(this.name,i),JSON.stringify(t)),t},update:function(t,e){"undefined"==typeof e&&(e=t,t=e[this.idAttribute]);var i=this.get(t);return i&&(i=r(i,e),this.save(i)),i},updateAll:function(t){var e=this.all();return e.forEach(function(e){e=r(e,t),this.save(e)},this),e},find:function(n){var s,r,o=this.name,a=this;return n?(this.refresh(),this.ids.reduce(function(l,u){return r=t(a.storageAdaptor.getItem(e(o,u))),s=i(n,r),s&&l.push(r),l},[])):this.all()},get:function(i){return t(this.storageAdaptor.getItem(e(this.name,i)))},all:function(){var i,n=this,s=this.name;return this.refresh(),this.ids.reduce(function(r,o){return i=n.storageAdaptor.getItem(e(s,o)),i&&r.push(t(i)),r},[])},destroy:function(i){var n,s=i[this.idAttribute]?i[this.idAttribute]:i,r=e(this.name,s);return i=t(this.storageAdaptor.getItem(r)),this.storageAdaptor.removeItem(r),n=this.ids.indexOf(s),-1!=n&&this.ids.splice(n,1),this.storageAdaptor.setItem(this.name,this.ids.join(",")),i},destroyAll:function(n){var s,r,o,a;this.refresh();for(var l=this.ids.length-1;l>=0;l--)s=this.ids[l],a=e(this.name,s),n?(o=t(this.storageAdaptor.getItem(a)),r=i(n,o),r&&(this.storageAdaptor.removeItem(a),this.ids.splice(l,1))):this.storageAdaptor.removeItem(a);n?this.storageAdaptor.setItem(this.name,this.ids.join(",")):(this.storageAdaptor.removeItem(this.name),this.ids=[])},size:function(){return this.refresh(),this.ids.length},refresh:function(){var t=this.storageAdaptor.getItem(this.name);this.store&&this.store===t||(this.ids=t&&t.split(",")||[],this.store=t)}};return o}),define("lib/currentUserId",[],function(){"use strict";return{get:function(){return window._uid?+window._uid:window._uid}}}),define("lib/personalStorage",["lodash","exports","lib/currentUserId"],function(t,e,i){"use strict";function n(i,n){var s=t.toArray(arguments);return s[1]=e.getKey(n),i.apply(e.storageAdapter,s.slice(1))}e.storageAdapter=window.localStorage,e.storageAdapter&&(e.getKey=function(t){var e=i.get();return e||(e="0"),e+"-"+t},e.getItem=t.wrap(function(t){return e.storageAdapter.getItem(t)},n),e.setItem=t.wrap(function(t,i){e.storageAdapter.setItem(t,i)},n),e.removeItem=t.wrap(function(t){e.storageAdapter.removeItem(t)},n))}),define("global/exodus",["jquery","lodash","depot","Modernizr","lib/currentUserId","lib/personalStorage","exports"],function(t,e,i,n,s,r,o){"use strict";function a(t){var e=!!t.talkId,i={itemId:e?t.talkId:t.playlistId,itemType:e?"Talk":"Playlist"};return e&&(i.secondsPlayed=t.currentTime),i}var l;o.migrate=function(i){if(i&&i.length){var n=e.map(i,a);return t.post("/saved_items/batch",{records:n}).done(function(t){e.forEach(t.records,function(t){var n={};n["Talk"===t.itemType?"talkId":"playlistId"]=t.itemId;var s=e.find(i,n);s&&s._id&&l.destroy(s._id)})})}},o.init=function(){if(n.localstorage&&s.get()){l=i("watchLater",{storageAdaptor:r});var t=l.all();o.migrate(t)}}}),define("lib/currentUser",["jquery","lodash","lib/currentUserId","lib/personalStorage"],function(t,e,i,n){"use strict";function s(t){return e.isFinite(t)?+t:null}function r(t){return t?""+t:null}function o(t){return t=e.pick(t,S),e.forOwn(t,function(e,i){t[i]=x[i](e)}),t}function a(t){return t&&JSON.parse(t)}function l(){return o(a(_.storageAdapter.getItem(w)))}function u(){return t.get("/me.json",{c:i.get()+"-"+Math.round(+new Date/1e3/120)})}function c(t){u().then(e.bind(h,_,t),e.bind(p,_,t))}function h(t,e){return e?(e.lastDownloaded=(new Date).getTime(),v=o(e),g(t)&&_.storageAdapter.setItem(w,JSON.stringify(v)),void 0):(p(t,e),void 0)}function p(t){d(),t.reject()}function d(){v=null,_.storageAdapter.removeItem(w),t(document.documentElement).removeClass("loggedin").addClass("loggedout")}function f(t,e){var i=(new Date).getTime();return t>i-(e||0)}function m(){return _._check(v)}function g(t){var e=m();return e?t.resolve(v):(d(),t.reject()),e}var v,b=function(t){return!!t},y=t.Deferred,_={},w="me",k=!0,x={id:s,profileId:s,firstName:r,lastName:r,avatarUrl:r,hasConferences:b,isCommentModerator:b,hasEdActivity:b,isTEDxOrganizer:b,lastDownloaded:s},S=e.keys(x);return _.storageAdapter=n,_.getDetails=function(){var t=new y;return v=v||l(),m()||(v=null),v?(t.resolve(v),k&&!f(18e4,v.lastDownloaded)&&(k=!1,c(new y))):i.get()?c(t):t.reject(),t.promise()},_._check=function(t){var n=864e5;return t&&+t.id===+i.get()&&S.length===e.keys(e.pick(t,S)).length&&f(n,t.lastDownloaded)},_._reset=function(){v=void 0,k=!0},_}),define("lib/watchLaterLocal",["exports","jquery","lodash","Modernizr","lib/currentUserId","lib/personalStorage"],function(t,e,i,n,s,r){"use strict";function o(t){return+t.split("|",1).pop()}function a(t){return(t.match(/(\|\d+)+/)||"|")[0]+"|"}function l(e){var i=new u,n=i.promise(),s=t._checkCapability();return s!==!0?(i.reject(s),n):(e.apply(i,Array.prototype.splice.call(arguments,1)),n)}var u=e.Deferred,c="wl",h=null,p=18e4,d=null;t.addPlaylist=function(e){return t._add("playlists",e)},t.addTalk=function(e){return t._add("talks",e)},t.checkPlaylist=function(e){return t._check("playlists",e)},t.checkTalk=function(e){return t._check("talks",e)},t.count=i.wrap(function(){var e=this;t._getCache().then(function(t){e.resolve({total:t.talksCount+t.playlistsCount,talks:t.talksCount,playlists:t.playlistsCount})},function(t){e.reject(t)})},l),t.removePlaylist=function(e){return t._remove("playlists",e)},t.removeTalk=function(e){return t._remove("talks",e)},t.sync=i.wrap(function(){if(d)return d;var n=this;return d=n.promise(),e.get("/saved_items/sync.txt").then(function(e){return e=+new Date+";"+e,(h=t._fromS(e))?(r.setItem(c,e),n.resolve(h),void 0):(n.reject(new Error("Invalid response")),void 0)},function(){n.reject(new Error("Rejected by server"))}).always(i.delay(function(){d=null},p)),d},l),t._add=i.wrap(function(e,i){var n=this;t._check(e,i).then(function(s){s||(h[e+"List"]+=i+"|",h[e+"Count"]++,r.setItem(c,t._toS(h))),n.resolve(h)},function(t){n.reject(t)})},l),t._check=i.wrap(function(e,i){var n=this;t._getCache().then(function(t){n.resolve(-1!==t[e+"List"].indexOf("|"+i+"|"))},function(t){n.reject(t)})},l),t._checkCapability=function(){return n.localstorage?s.get()?!0:new Error("Not logged in"):new Error("No localStorage")},t._getCache=function(){var e=new u,i=e.promise();return h?(e.resolve(h),i):(h=t._fromS(r.getItem(c)),h?(e.resolve(h),+new Date-+h.lastSync>p&&t.sync()):t.sync().then(function(){e.resolve(h)},function(t){e.reject(t)}),i)},t._remove=i.wrap(function(e,i){var n=this;t._check(e,i).then(function(s){s&&(h[e+"List"]=h[e+"List"].replace("|"+i+"|","|"),h[e+"Count"]--,r.setItem(c,t._toS(h))),n.resolve(h)},function(t){n.reject(t)})},l),t._reset=function(){h=null,d=null},t._fromS=function(t){if(!t)return null;if(!t.match(/^\d+;\d+(\|\d+)*;\d+(\|\d+)*$/))return null;var e=t.split(";");return{lastSync:+e[0],talksCount:o(e[1]),talksList:a(e[1]),playlistsCount:o(e[2]),playlistsList:a(e[2])}},t._toS=function(t){return t?[t.lastSync,t.talksCount+t.talksList.slice(0,-1),t.playlistsCount+t.playlistsList.slice(0,-1)].join(";"):null}}),define("utils/monogram",["jquery"],function(t){"use strict";return function(e){return e?(e=e.split(",")[0],e=e.replace(/\s[a-z]\w+\s/g," "),e=e.replace(/\s\w+\.$/,""),e=e.replace(/\s[A-Z]+$/,""),e=e.replace(/[^\s\w]+([\w])/g,"$1"),e=t.trim(e).toUpperCase().split(/\s+/),e[0][0]+(e.length>1?e[e.length-1][0]:"")):""}}),define("hbs!templates/accountFixture",["hbs","hbs/handlebars","templates/helpers/t"],function(t,e){var i=e.template(function(t,e,i,n,s){function r(t,e){var n,s="";return s+="\n        ",n=i["if"].call(t,t&&t.items,{hash:{},inverse:b.program(10,h,e),fn:b.program(2,o,e)}),(n||0===n)&&(s+=n),s+="\n      "}function o(t,e){var n,s,r="";return r+='\n          <li class="nav__item nav__item--foldable ',n=i["if"].call(t,t&&t.open,{hash:{},inverse:b.noop,fn:b.program(3,a,e)}),(n||0===n)&&(r+=n),r+='">\n            <a class="nav__link" href="#">',(s=i.name)?n=s.call(t,{hash:{}}):(s=t&&t.name,n=typeof s===g?s.call(t,{hash:{}}):s),r+=v(n)+'</a>\n            <div class="nav__folder" ',n=i["if"].call(t,t&&t.open,{hash:{},inverse:b.noop,fn:b.program(5,l,e)}),(n||0===n)&&(r+=n),r+='>\n              <ul class="nav__menu">\n                ',n=i.each.call(t,t&&t.items,{hash:{},inverse:b.noop,fn:b.program(7,u,e)}),(n||0===n)&&(r+=n),r+="\n              </ul>\n            </div>\n          </li>\n        "
}function a(){return"nav__item--active"}function l(){return'style="display:block"'}function u(t,e){var n,s,r="";return r+='\n                  <li class="nav__item">\n                    <a class="nav__link" href="',(s=i.url)?n=s.call(t,{hash:{}}):(s=t&&t.url,n=typeof s===g?s.call(t,{hash:{}}):s),r+=v(n)+'" ',n=i["if"].call(t,t&&t.external,{hash:{},inverse:b.noop,fn:b.program(8,c,e)}),(n||0===n)&&(r+=n),r+=">",(s=i.name)?n=s.call(t,{hash:{}}):(s=t&&t.name,n=typeof s===g?s.call(t,{hash:{}}):s),r+=v(n)+"</a>\n                  </li>\n                "}function c(){return'target="_blank"'}function h(t,e){var n,s,r="";return r+='\n          <li class="nav__item">\n            <a class="nav__link" href="',(s=i.url)?n=s.call(t,{hash:{}}):(s=t&&t.url,n=typeof s===g?s.call(t,{hash:{}}):s),r+=v(n)+'" ',n=i["if"].call(t,t&&t.external,{hash:{},inverse:b.noop,fn:b.program(8,c,e)}),(n||0===n)&&(r+=n),r+=">",(s=i.name)?n=s.call(t,{hash:{}}):(s=t&&t.name,n=typeof s===g?s.call(t,{hash:{}}):s),r+=v(n)+"</a>\n          </li>\n        "}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var p,d,f,m="",g="function",v=this.escapeExpression,b=this,y=i.helperMissing;return m+='\n\n<div class="account__fixture">\n  <div class="account__fixture__welcome">\n    <h2 class="h6">'+v((d=i.t||e&&e.t,f={hash:{}},d?d.call(e,"Hi ",f):y.call(e,"t","Hi ",f)))+v((p=e&&e.user,p=null==p||p===!1?p:p.firstName,typeof p===g?p.apply(e):p))+",</h2>\n    <div>"+v((d=i.t||e&&e.t,f={hash:{}},d?d.call(e,"This is your stuff.",f):y.call(e,"t","This is your stuff.",f)))+'</div>\n  </div>\n\n  <nav class="nav">\n    <ul class="nav__menu">\n      ',p=i.each.call(e,e&&e.items,{hash:{},inverse:b.noop,fn:b.program(1,r,s)}),(p||0===p)&&(m+=p),m+="\n    </ul>\n  </nav>\n</div>\n"});return i}),define("hbs!templates/accountPoparoo",["hbs","hbs/handlebars","templates/helpers/t"],function(t,e){var i=e.template(function(t,e,i,n,s){function r(){return"account__poparoo__later--populated"}function o(t){var e,n,s,r="";return r+='\n      <li class="account__poparoo__item">\n        <a class="l3" href="/profiles/'+f((e=t&&t.user,e=null==e||e===!1?e:e.profileId,typeof e===d?e.apply(t):e))+'/tedx-event-management">\n          '+f((n=i.t||t&&t.t,s={hash:{}},n?n.call(t,"TEDx Events",s):m.call(t,"t","TEDx Events",s)))+"\n        </a>\n      </li>\n    "}function a(t){var e,n,s,r="";return r+='\n      <li class="account__poparoo__item">\n        <a class="l3" href="'+f((e=t&&t.itemUrls,e=null==e||e===!1?e:e.conferences,typeof e===d?e.apply(t):e))+'">\n          '+f((n=i.t||t&&t.t,s={hash:{}},n?n.call(t,"Conferences",s):m.call(t,"t","Conferences",s)))+"\n        </a>\n      </li>\n    "}function l(t){var e,n,s,r="";return r+='\n      <li class="account__poparoo__item">\n        <a class="l3" href="'+f((e=t&&t.itemUrls,e=null==e||e===!1?e:e.tedEdHistory,typeof e===d?e.apply(t):e))+'" target="_blank">\n          '+f((n=i.t||t&&t.t,s={hash:{}},n?n.call(t,"Your activity on TED-Ed",s):m.call(t,"t","Your activity on TED-Ed",s)))+"\n        </a>\n      </li>\n    "}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var u,c,h,p="",d="function",f=this.escapeExpression,m=i.helperMissing,g=this;return p+='\n\n<div class="account__poparoo">\n  <h2>'+f((c=i.t||e&&e.t,h={hash:{}},c?c.call(e,"Hi ",h):m.call(e,"t","Hi ",h)))+f((u=e&&e.user,u=null==u||u===!1?u:u.firstName,typeof u===d?u.apply(e):u))+",</h2>\n  <div>"+f((c=i.t||e&&e.t,h={hash:{}},c?c.call(e,"This is your stuff.",h):m.call(e,"t","This is your stuff.",h)))+'</div>\n\n  <ul class="account__poparoo__menu">\n    <li class="account__poparoo__item" id="account-talks">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.savedTalks,typeof u===d?u.apply(e):u))+'">\n        '+f((c=i.t||e&&e.t,h={hash:{}},c?c.call(e,"Saved talks",h):m.call(e,"t","Saved talks",h)))+'\n      </a>\n\n      <a class="account__poparoo__later ',u=i["if"].call(e,e&&e.savedTalksCount,{hash:{},inverse:g.noop,fn:g.program(1,r,s)}),(u||0===u)&&(p+=u),p+='" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.savedTalks,typeof u===d?u.apply(e):u))+'">\n        <span class="account__poparoo__later__count">',(c=i.savedTalksCount)?u=c.call(e,{hash:{}}):(c=e&&e.savedTalksCount,u=typeof c===d?c.call(e,{hash:{}}):c),p+=f(u)+'</span>\n      </a>\n    </li>\n\n    <li class="account__poparoo__item" id="account-playlists">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.savedPlaylists,typeof u===d?u.apply(e):u))+'">\n        '+f((c=i.t||e&&e.t,h={hash:{}},c?c.call(e,"Saved playlists",h):m.call(e,"t","Saved playlists",h)))+'\n      </a>\n\n      <a class="account__poparoo__later ',u=i["if"].call(e,e&&e.savedPlaylistsCount,{hash:{},inverse:g.noop,fn:g.program(1,r,s)}),(u||0===u)&&(p+=u),p+='" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.savedPlaylists,typeof u===d?u.apply(e):u))+'">\n        <span class="account__poparoo__later__count">',(c=i.savedPlaylistsCount)?u=c.call(e,{hash:{}}):(c=e&&e.savedPlaylistsCount,u=typeof c===d?c.call(e,{hash:{}}):c),p+=f(u)+'</span>\n      </a>\n    </li>\n\n    <li class="account__poparoo__item">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.favoriteTalks,typeof u===d?u.apply(e):u))+'">\n        '+f((c=i.t||e&&e.t,h={hash:{}},c?c.call(e,"Favorite talks",h):m.call(e,"t","Favorite talks",h)))+'\n      </a>\n    </li>\n\n    <li class="account__poparoo__item">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.favoritePlaylists,typeof u===d?u.apply(e):u))+'">\n        '+f((c=i.t||e&&e.t,h={hash:{}},c?c.call(e,"Favorite playlists",h):m.call(e,"t","Favorite playlists",h)))+"\n      </a>\n    </li>\n\n    ",u=i["if"].call(e,(u=e&&e.user,null==u||u===!1?u:u.isTEDxOrganizer),{hash:{},inverse:g.noop,fn:g.program(3,o,s)}),(u||0===u)&&(p+=u),p+="\n\n    ",u=i["if"].call(e,(u=e&&e.user,null==u||u===!1?u:u.hasConferences),{hash:{},inverse:g.noop,fn:g.program(5,a,s)}),(u||0===u)&&(p+=u),p+="\n\n    ",u=i["if"].call(e,(u=e&&e.user,null==u||u===!1?u:u.hasEdActivity),{hash:{},inverse:g.noop,fn:g.program(7,l,s)}),(u||0===u)&&(p+=u),p+='\n\n    <li class="account__poparoo__item">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.settings,typeof u===d?u.apply(e):u))+'">\n        '+f((c=i.t||e&&e.t,h={hash:{}},c?c.call(e,"Settings",h):m.call(e,"t","Settings",h)))+'\n      </a>\n    </li>\n\n    <li class="account__poparoo__item">\n      <a class="l3" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.profile,typeof u===d?u.apply(e):u))+'">\n        '+f((c=i.t||e&&e.t,h={hash:{}},c?c.call(e,"Your profile",h):m.call(e,"t","Your profile",h)))+'\n      </a>\n    </li>\n  </ul>\n\n  <a class="account__poparoo__leave" href="'+f((u=e&&e.itemUrls,u=null==u||u===!1?u:u.logOut,typeof u===d?u.apply(e):u))+'">'+f((c=i.t||e&&e.t,h={hash:{}},c?c.call(e,"Log out",h):m.call(e,"t","Log out",h)))+"</a>\n</div>\n"});return i}),define("transit",["jquery"],function(){return function(t){function e(t){if(t in h.style)return t;var e=["Moz","Webkit","O","ms"],i=t.charAt(0).toUpperCase()+t.substr(1);if(t in h.style)return t;for(var n=0;n<e.length;++n){var s=e[n]+i;if(s in h.style)return s}}function i(){return h.style[p.transform]="",h.style[p.transform]="rotateY(90deg)",""!==h.style[p.transform]}function n(t){return"string"==typeof t&&this.parse(t),this}function s(t,e,i){e===!0?t.queue(i):e?t.queue(e,i):i()}function r(e){var i=[];return t.each(e,function(e){e=t.camelCase(e),e=t.transit.propertyMap[e]||t.cssProps[e]||e,e=l(e),-1===t.inArray(e,i)&&i.push(e)}),i}function o(e,i,n,s){var o=r(e);t.cssEase[n]&&(n=t.cssEase[n]);var a=""+c(i)+" "+n;parseInt(s,10)>0&&(a+=" "+c(s));var l=[];return t.each(o,function(t,e){l.push(e+" "+a)}),l.join(", ")}function a(e,i){i||(t.cssNumber[e]=!0),t.transit.propertyMap[e]=p.transform,t.cssHooks[e]={get:function(i){var n=t(i).css("transit:transform");return n.get(e)},set:function(i,n){var s=t(i).css("transit:transform");s.setFromString(e,n),t(i).css({"transit:transform":s})}}}function l(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function u(t,e){return"string"!=typeof t||t.match(/^[\-0-9\.]+$/)?""+t+e:t}function c(e){var i=e;return t.fx.speeds[i]&&(i=t.fx.speeds[i]),u(i,"ms")}t.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var h=document.createElement("div"),p={},d=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;p.transition=e("transition"),p.transitionDelay=e("transitionDelay"),p.transform=e("transform"),p.transformOrigin=e("transformOrigin"),p.transform3d=i();var f={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},m=p.transitionEnd=f[p.transition]||null;for(var g in p)p.hasOwnProperty(g)&&"undefined"==typeof t.support[g]&&(t.support[g]=p[g]);h=null,t.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},t.cssHooks["transit:transform"]={get:function(e){return t(e).data("transform")||new n},set:function(e,i){var s=i;s instanceof n||(s=new n(s)),e.style[p.transform]="WebkitTransform"!==p.transform||d?s.toString():s.toString(!0),t(e).data("transform",s)}},t.cssHooks.transform={set:t.cssHooks["transit:transform"].set},t.fn.jquery<"1.8"&&(t.cssHooks.transformOrigin={get:function(t){return t.style[p.transformOrigin]},set:function(t,e){t.style[p.transformOrigin]=e}},t.cssHooks.transition={get:function(t){return t.style[p.transition]},set:function(t,e){t.style[p.transition]=e}}),a("scale"),a("translate"),a("rotate"),a("rotateX"),a("rotateY"),a("rotate3d"),a("perspective"),a("skewX"),a("skewY"),a("x",!0),a("y",!0),n.prototype={setFromString:function(t,e){var i="string"==typeof e?e.split(","):e.constructor===Array?e:[e];i.unshift(t),n.prototype.set.apply(this,i)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);this.setter[t]?this.setter[t].apply(this,e):this[t]=e.join(",")},get:function(t){return this.getter[t]?this.getter[t].apply(this):this[t]||0},setter:{rotate:function(t){this.rotate=u(t,"deg")},rotateX:function(t){this.rotateX=u(t,"deg")},rotateY:function(t){this.rotateY=u(t,"deg")},scale:function(t,e){void 0===e&&(e=t),this.scale=t+","+e},skewX:function(t){this.skewX=u(t,"deg")},skewY:function(t){this.skewY=u(t,"deg")},perspective:function(t){this.perspective=u(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==t&&void 0!==t&&(this._translateX=u(t,"px")),null!==e&&void 0!==e&&(this._translateY=u(e,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");return t[0]&&(t[0]=parseFloat(t[0])),t[1]&&(t[1]=parseFloat(t[1])),t[0]===t[1]?t[0]:t},rotate3d:function(){for(var t=(this.rotate3d||"0,0,0,0deg").split(","),e=0;3>=e;++e)t[e]&&(t[e]=parseFloat(t[e]));return t[3]&&(t[3]=u(t[3],"deg")),t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,i,n){e.setFromString(i,n)})},toString:function(t){var e=[];for(var i in this)if(this.hasOwnProperty(i)){if(!p.transform3d&&("rotateX"===i||"rotateY"===i||"perspective"===i||"transformOrigin"===i))continue;"_"!==i[0]&&(t&&"scale"===i?e.push(i+"3d("+this[i]+",1)"):t&&"translate"===i?e.push(i+"3d("+this[i]+",0)"):e.push(i+"("+this[i]+")"))}return e.join(" ")}},t.fn.transition=t.fn.transit=function(e,i,n,r){var a=this,l=0,u=!0;"function"==typeof i&&(r=i,i=void 0),"function"==typeof n&&(r=n,n=void 0),"undefined"!=typeof e.easing&&(n=e.easing,delete e.easing),"undefined"!=typeof e.duration&&(i=e.duration,delete e.duration),"undefined"!=typeof e.complete&&(r=e.complete,delete e.complete),"undefined"!=typeof e.queue&&(u=e.queue,delete e.queue),"undefined"!=typeof e.delay&&(l=e.delay,delete e.delay),"undefined"==typeof i&&(i=t.fx.speeds._default),"undefined"==typeof n&&(n=t.cssEase._default),i=c(i);var h=o(e,i,n,l),d=t.transit.enabled&&p.transition,f=d?parseInt(i,10)+parseInt(l,10):0;if(0===f){var g=function(t){a.css(e),r&&r.apply(a),t&&t()};return s(a,u,g),a}var v={},b=function(i){var n=!1,s=function(){n&&a.unbind(m,s),f>0&&a.each(function(){this.style[p.transition]=v[this]||null}),"function"==typeof r&&r.apply(a),"function"==typeof i&&i()};f>0&&m&&t.transit.useTransitionEnd?(n=!0,a.bind(m,s)):window.setTimeout(s,f),a.each(function(){f>0&&(this.style[p.transition]=h),t(this).css(e)})},y=function(t){var e=0;"MozTransition"===p.transition&&25>e&&(e=25),window.setTimeout(function(){b(t)},e)};return s(a,u,y),this},t.transit.getTransitionValue=o}(jQuery),jQuery}),define("plugins/addClassFor",["jquery"],function(t){"use strict";t.fn.extend({addClassFor:function(t,e){var i=this;return window.setTimeout(function(){i.removeClass(t)},e),i.addClass(t)}})}),define("global/account",["jquery","lodash","lib/shoji","lib/pubSub","lib/currentUser","lib/personalStorage","lib/watchLaterLocal","utils/monogram","hbs!templates/accountFixture","hbs!templates/accountPoparoo","lib/resize","transit","widgets/fixture","plugins/addClassFor"],function(t,e,i,n,s,r,o,a,l,u){"use strict";function c(e){var s=n("breakpoint").read()>=1024;if(i.canSlide()&&(e.preventDefault(),!s))return b?(b.fixture("reveal"),void 0):(b=t(l({items:S(_),user:_})).fixture({at:"right"}),void 0)}function h(t){if(!(1024>t)){n("breakpoint").unsubscribe(h);var e=g.parent().find("div.nav__folder").html(u({itemUrls:x,user:_,savedTalksCount:!1,savedPlaylistsCount:!1}));y=e.find("a."+k),d()}}function p(){v||(v=t("#account-link").find("img.banner__account__image")),v.transition({opacity:0}).transition({opacity:1}).transition({opacity:0}).transition({opacity:1})}function d(){o.count().done(E)}function f(t,e){t.find("a.account__poparoo__later")[e?"addClass":"removeClass"]("account__poparoo__later--populated").find("span").text(e)}function m(e){var i;_=e,g=t("#account-link"),g.on("click",c),n("breakpoint").subscribe(h),n("favorite.add").subscribe(p),d(),n("watchLater.add").subscribe(d),n("watchLater.remove").subscribe(d),_.avatarUrl?(i=t("<img class=banner__account__image>"),i.attr("src",_.avatarUrl),t("#account-image").replaceWith(i)):t("#account-image").text(a(_.firstName+" "+_.lastName))}var g,v,b,y,_,w={},k="account__poparoo__later",x={savedTalks:"/dashboard/saved_talks",savedPlaylists:"/dashboard/saved_playlists",favoriteTalks:"/dashboard/favorite_talks",favoritePlaylists:"/dashboard/favorite_playlists",watchHistory:"/dashboard/history",conferences:"/dashboard/conferences",tedEdHistory:"http://ed.ted.com/activity/lessons",settings:"/account/my",profile:"/profile",logOut:TED.signOutUrl},S=function(t){var e=[];return e.push({name:"Talks",open:!0,items:[{name:"Saved talks",url:x.savedTalks},{name:"Saved playlists",url:x.savedPlaylists},{name:"Favorite talks",url:x.favoriteTalks},{name:"Favorite playlists",url:x.favoritePlaylists},{name:"Talks you've watched",url:x.watchHistory}]}),t&&t.isTEDxOrganizer&&e.push({name:"TEDx Events",url:"/profiles/"+t.profileId+"/tedx-event-management"}),t&&t.hasConferences&&e.push({name:"Conferences",url:"/dashboard/conferences"}),t&&t.hasEdActivity&&e.push({name:"Your TED-Ed activity",url:x.tedEdHistory,external:!0}),e.push({name:"Settings",url:"/account/my"}),e.push({name:"Your profile",url:"/profile"}),e.push({name:"Log out",url:TED.signOutUrl}),e},E=function(){var e,i,n;return function(s){var r,o=s.total,a=o>0;if(o!==e){var l;i&&s.talks!==i&&(r="talks",l=s.talks>i),n&&s.playlists!==n&&(r="playlists",l=s.playlists>n),r&&t("#account-"+r)[l?"addClass":"removeClass"]("account__poparoo__item--active"),s.talks!==i&&f(t("#account-talks"),s.talks),s.playlists!==n&&f(t("#account-playlists"),s.playlists);var u=t("#account-badge");u.text(s.total>99?99:s.total)[a?"addClass":"removeClass"]("badge--visible"),a&&null!==e&&s.total>e&&u.addClassFor("badge--notify",600),i=s.talks,n=s.playlists,e=o}}}();return w.init=e.once(function(){s.getDetails().done(m)}),w}),define("widgets/ad",["lodash","jquery","jqueryui/widget"],function(t,e){"use strict";e.widget("ted.ad",{_rendered:!1,$image:null,$text:null,$link:null,blocked:function(){this.element.hide()},refresh:function(){if(this.options.blocked)return this.blocked(),void 0;if(this._rendered||(this.element.addClass("ad"),this.element.html(""),this.options.ad.houseAd||(this.$text=e('<div class="ad__text">TED Talks are free thanks to our partners</div>').appendTo(this.element)),this.$link=e('<a class="ad__unit" href="#" rel="nofollow" target="_blank">').appendTo(this.element),this.$image=e("<img>").appendTo(this.$link),this._rendered=!0),!this.options.ad)return this.element.hide(),void 0;var t=this._getRenderDetails();this.$link.attr("href",t.click),this.$image.attr({src:t.currentCreative.url,width:t.dimensions.width,height:t.dimensions.height}),this.element[this.options.ad.hasDisplay===!1?"hide":"show"](),this._impress()},_create:function(){this.refresh()},_fireImpression:function(t){var e=new Image;e.src=t},_impress:function(){this._fireImpression(this.options.ad.impression),t.forEach(this.options.ad.thirdPartyImpressions,this._fireImpression)},_getCreative:function(){var e=t.filter(this.options.ad.creative,function(t){return""!==t.url}),i=Math.max(window.devicePixelRatio||1,1);return t.reduce(e,function(t,e){return e.density<=i?e:t||e},{})},_getRenderDetails:function(){return t.extend({currentCreative:this._getCreative()},this.options.ad)},_setOption:function(t,e){this._super(t,e),this.refresh()}})}),define("hbs!templates/sponsorshipBug",["hbs","hbs/handlebars"],function(t,e){var i=e.template(function(t,e,i){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var n="";return n+='\n\n<a class="sponsorship-bug__link media" href="#" rel="nofollow">\n  <div class="sponsorship-bug__image media__image media__image--alt">\n    <img src="" alt="">\n  </div>\n  <div class="sponsorship-bug__message media__message">\n    TED Talks are free<br>\n    thanks to our partners\n  </div>\n</a>\n'});return i}),define("templates/helpers/assetUrl",["Handlebars"],function(t){"use strict";function e(t){return TED.assetHost+t}return t.registerHelper("assetUrl",e),e}),define("hbs!templates/sponsorshipBugBlocked",["hbs","hbs/handlebars","templates/helpers/assetUrl"],function(t,e){var i=e.template(function(t,e,i){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var n,s,r="",o=i.helperMissing,a=this.escapeExpression;return r+='\n\n<a class="sponsorship-bug__nag" href="http://support.ted.com/customer/portal/articles/1532436-how-can-i-support-ted-by-modifying-my-ad-blocker-settings" target="_blank">\n  <img class="sponsorship-bug__nag__image" src="'+a((n=i.assetUrl||e&&e.assetUrl,s={hash:{}},n?n.call(e,"/temp/ad-blocker-bug.png",s):o.call(e,"assetUrl","/temp/ad-blocker-bug.png",s)))+'" alt="Show your support by unblocking ted.com from ad blockers">\n</a>\n'});return i}),define("widgets/sponsorshipBug",["jquery","hbs!templates/sponsorshipBug","hbs!templates/sponsorshipBugBlocked","widgets/ad"],function(t,e,i){"use strict";t.widget("ted.sponsorshipBug",t.ted.ad,{blocked:function(){this.element.html(i()),this.element.show(),this._rendered=!1},refresh:function(){return this.options.blocked?this.blocked():(this._rendered||(this.element.html(e()),this.$image=this.element.find("img"),this.$link=this.element.find("a.sponsorship-bug__link"),this._rendered=!0),this._super(),void 0)},_create:function(){this.element.addClass("sponsorship-bug"),this.refresh()}})}),define("lib/ads",["jquery","widgets/ad","widgets/sponsorshipBug"],function(t){"use strict";function e(e){var i=n[e.type];void 0===i?window.console&&console.log&&(console.log("Unknown ad type"),console.log(e)):t(i.id)[i.widget]({ad:e})}function i(i){var r=s.player=i;r&&(["flash","hls"].indexOf(r.player("mode"))>-1?r.on({playerad:function(t,i){e(i.ad)},playeradblock:function(){var e=n.bug;t(e.id)[e.widget]({blocked:!0})}}):googletag.cmd.push(function(){googletag.display("ad-unit")}))}var n={bug:{id:"#sponsorship-bug-placeholder",widget:"sponsorshipBug"},companion:{id:"#ad-unit",widget:"ad"},"companion-mobile":{id:"#ad-unit-mobile",widget:"ad"},devil:{id:"#devil-ad",widget:"ad"},onPage:{id:"#ad-unit",widget:"ad"}},s={player:null};return s.initPlayer=i,s.gptAd=function(t){e(t.ad)},s}),require(["jquery","lodash","dq","global/links","global/subscribe","global/retirement","global/navs","global/mainNav","global/login","global/exodus","global/account","lib/ads","jqueryujs"],function(t,e,i,n,s,r,o,a,l,u,c,h){"use strict";e.defer(function(){n.init(),s.init(),r.init(),o.init(),a.init(),l.init(),u.init(),c.init()}),i({q:_g,modules:{global:{ads:h}}})}),define("global",function(){}),define("utils/is_mobile",[],function(){"use strict";var t=navigator?navigator.userAgent:"",e=function(e){return e.test(t)},i=function(t){return function(){return e(t)}},n=function(){return n.isIOS()||n.isAndroid()};return n.isIOS=i(/(iPad|iPhone|iPod)/g),n.isAndroid=i(/Android/g),n}),define("utils/share",["lodash","lib/ga","utils/is_mobile"],function(t,e,i){"use strict";var n={height:450,message:"",url:location.href,width:500},s=encodeURIComponent,r={email:{href:"//api.addthis.com/oexchange/0.8/forward/email/offer?url=<%= url %>&title=<%= message %>",ga:"email"},facebook:{href:"//www.facebook.com/sharer/sharer.php?u=<%= url %>",ga:"facebook"},gplus:{href:"//plus.google.com/share?url=<%= url %>",ga:"googlePlus"},linkedin:{href:"//www.linkedin.com/shareArticle?mini=true&url=<%= url %>&title=<%= message %>&source=TED",ga:"linkedIn",height:500},twitter:{href:"//twitter.com/intent/tweet?url=<%= url %>&text=<%= message %>",ga:"twitter"}};return function(o,a,l){var u,c=r[o];if(!c)return!1;a=t.merge({},n,c,a),u=l?"":t.template(a.href,{url:s(a.url),message:s(a.message)});var h;return h=i.isIOS()&&!u?window:window.open(u,"sharingpopup",["scrollbars=1","resizable=1","height="+a.height,"width="+a.width].join(",")),e.sendSocial(o,"start",a.url),h.focus(),h.goToRightUrl=function(e){u=t.template(a.href,{url:s(e),message:s(a.message)}),h.location=u,h.focus()},h}}),define("hbs!templates/popupMenu",["hbs","hbs/handlebars"],function(t,e){var i=e.template(function(t,e,i,n,s){function r(t,e){var n,s,r="";return r+='\n      <li class="poup-menu__item">\n        <a href="',(s=i.url)?n=s.call(t,{hash:{}}):(s=t&&t.url,n=typeof s===u?s.call(t,{hash:{}}):s),r+=c(n)+'" ',n=i["if"].call(t,t&&t.blank,{hash:{},inverse:h.noop,fn:h.program(2,o,e)}),(n||0===n)&&(r+=n),r+=' class="l3 popup-menu__link">\n          ',(s=i.label)?n=s.call(t,{hash:{}}):(s=t&&t.label,n=typeof s===u?s.call(t,{hash:{}}):s),r+=c(n)+"\n        </a>\n      </li>\n    "}function o(){return'target="_blank"'}this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var a,l="",u="function",c=this.escapeExpression,h=this;return l+='\n\n<div class="popup-menu">\n  <ul class="popup-menu__list">\n    ',a=i.each.call(e,e&&e.items,{hash:{},inverse:h.noop,fn:h.program(1,r,s)}),(a||0===a)&&(l+=a),l+="\n  </ul>\n</div>\n"});return i}),define("widgets/popupMenu",["jquery","lodash","hbs!templates/popupMenu","widgets/tooltip"],function(t,e,i){"use strict";return t.widget("ted.popupMenu",t.ted.tooltip,{options:{interactive:!0,inverse:!0,items:[],position:{my:"center top+10",at:"center bottom",of:window,collision:"fit flip"}},_create:function(){this.options.content||(this.options.content=i({items:this._items()})),this._super(),this._on(this.popupObject,{"click a.popup-menu__link":function(t){var e=this.popupObject.find("a.popup-menu__link").index(t.target),i=-1===e?null:this.options.items[e];i.url||t.preventDefault(),this._trigger("itemclick",t,i)!==!1&&i.callback&&i.callback.call(t.target,t,i)}})},_items:function(){return e.map(this.options.items,function(t){var i=t.url||"#",n=t.blank||i.match(/^(?:https?:)?\/\//);return e.merge({},t,{url:i,blank:n})})}}),function(e,i){return t(e).popupMenu(i)}}),define("widgets/share",["jquery","lodash","utils/share","jqueryui/widget","widgets/popupMenu"],function(t,e,i){"use strict";t.widget("ted.share",{options:{url:window.location.href,message:null},_create:function(){var e=this;e._createOther(),e._on({"click a.share__link":function(i){e._share(t(i.target).parent().data("service")),i.preventDefault()}})},_createOther:function(){var t=this.element.find("a.share__link--other");if(t.length){var i=e.filter([{label:"Google +",service:"gplus"},{label:"LinkedIn",service:"linkedin"}]),n=this;t.popupMenu({items:e.map(i,function(t){return e.merge(t,{callback:function(t,e){n._share(e.service),t.preventDefault()}})})})}},_share:function(t){i(t,{url:this.options.url,message:this.options.message})}})}),define("hbs!templates/tablePrefix",["hbs","hbs/handlebars","templates/helpers/icon"],function(t,e){var i=e.template(function(t,e,i){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var n,s,r="",o=i.helperMissing,a=this.escapeExpression;return r+='\n\n<div class="table-modal__return">\n  <a class="table-modal__return__link" href="#">\n    '+a((n=i.icon||e&&e.icon,s={hash:{}},n?n.call(e,"arrow-alt-left","Back","table-modal__return__link__icon",s):o.call(e,"icon","arrow-alt-left","Back","table-modal__return__link__icon",s)))+'\n    <span class="table-modal__return__link__text">Back</span>\n  </a>\n</div>\n'});return i}),define("hbs!templates/tableOpener",["hbs","hbs/handlebars"],function(t,e){var i=e.template(function(t,e,i){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var n="";return n+='\n\n<div class="table-wrapper__helper button button--wide">\n  View table\n</div>\n'});return i}),define("hbs!templates/modalDefault",["hbs","hbs/handlebars","templates/helpers/t"],function(t,e){var i=e.template(function(t,e,i){this.compilerInfo=[4,">= 1.0.0"],i=this.merge(i,t.helpers);var n,s,r,o="",a=i.helperMissing,l=this.escapeExpression,u="function";return o+='\n\n<div class="modal__head">\n  <a class="modal__close modal__head__close" href="#">\n    <i class="g-button-modal-close">'+l((s=i.t||e&&e.t,r={hash:{}},s?s.call(e,"Close",r):a.call(e,"t","Close",r)))+'</i>\n  </a>\n  <h3 class="modal__head__title">',(s=i.title)?n=s.call(e,{hash:{}}):(s=e&&e.title,n=typeof s===u?s.call(e,{hash:{}}):s),o+=l(n)+"</h3>\n</div>\n"});return i}),define("widgets/modal",["jquery","lodash","hbs!templates/modalDefault","lib/pubSub","jqueryui/widget","lib/resize"],function(t,e,i,n){"use strict";function s(){c||(u=t(window),a=t(document.body),l=t("html"))}var r,o,a,l,u,c=0,h="modal-backdrop--show",p="modal--show",d="modal-open",f="modal__content",m=0;return o=["<div class=modal>","<div class=modal__outer>","<div class=modal__inner>"].join(""),n("breakpoint").subscribe(function(t){r=768>t}),t.widget("ted.modal",{options:{autoOpen:!0},_create:function(){var e=this;s(),this.options.title&&this.element.prepend(i(this.options)),this.modal=this.element.addClass(f).css("display","").wrap(o).closest("div.modal"),this.backdrop=t("<div class=modal-backdrop>"),this.wrapper=t("<div class=modal-wrapper>").append(this.backdrop).append(this.modal),this.wrapper.on("click",function(i){return r?!0:t(i.target).closest("div.modal__content").length?!0:(i.preventDefault(),e.close(),void 0)}),a.append(this.wrapper),this._on("a.modal__close",{click:function(t){t.preventDefault(),e.close()}}),this.options.autoOpen&&this.open()},_destroy:function(){var t=this;e.defer(function(){t.wrapper.remove()})},open:function(){this.backdrop.addClass(h),this.openedAt={y:u.scrollTop()},m++||l.addClass(d),r&&window.scrollTo(0,0),this.modal.addClass(p),this._trigger("open")},close:function(){this.modal.removeClass(p),--m||l.removeClass(d),this.openedAt&&window.scrollTo(0,this.openedAt.y),this.backdrop.removeClass(h),this._trigger("close")}}),function(e,i){return t(e).modal(i)}}),define("widgets/table",["jquery","hbs!templates/tablePrefix","hbs!templates/tableOpener","widgets/modal"],function(t,e,i){"use strict";var n,s="table-wrapper",r=s+"__table",o="table-modal";t.widget("ted.table",{open:function(){var t=this;this.modal?this.modal.modal("open"):(this.content=this.clone.wrap('<div class="module '+o+'__content"></div>').parent(),n||(n=e()),this.content.prepend(n),this._on(this.content.find("a.table-modal__return__link"),{click:function(e){e.preventDefault(),t.close()}}),this.modal=this.content.modal())},close:function(){this.modal.modal("close")},_click:function(t){t.preventDefault(),this.open()},_create:function(){this.clone=this.element.clone(),this.element.addClass(r),this.wrapper=this.element.wrap("<div class="+s+"></div>").parent(),this.opener=t(i()).appendTo(this.wrapper),this._on(this.opener,{click:this._click})}})}),define("widgets/submenu",["jquery","lodash","lib/shoji","jqueryui/widget"],function(t,e,i){"use strict";var n,s="submenu",r=s+"--fixture",o=s+"--opened",a=e.once(function(){n=t("body,html")});return t.widget("ted.submenu",{options:{at:"left",scrollAnimationDuration:200},conceal:function(t){t&&t.preventDefault(),i.concealFixture()},reveal:function(t){var e;i.canSlide()?(this._createFixture(),this.options.scrollAnimationDuration&&n.scrollTop()&&n.animate({scrollTop:0},this.options.scrollAnimationDuration),i.revealFixture(this.fixture),e=!0):this.element.hasClass(o)||(this.element.addClass(o),e=!0),t&&e&&t.preventDefault()},_create:function(){a(),this._on({"click a.submenu__heading__link":this.reveal})},_createFixture:function(){if(!this.fixture){var t=this.element.clone();t.addClass(o).addClass(r),this.fixture=i.addFixture(t,{at:this.options.at})}}}),function(e,i){return t(e).submenu(i)}}),define("pages",["jquery","dq","Swipe","templates/helpers/pageNav","lib/Timer","exports","global","widgets/share","widgets/table","widgets/submenu"],function(t,e,i,n,s,r){"use strict";function o(e,i){var n=t("#"+i.wrapperId),s=n.data("config");e.key="D2Tgc2wN+HGqQ28NhDkPUpXOjGSdsDJWgju5o4177IA=",e(i.id).setup({file:s.video.url,image:s.image.url,height:s.height,width:s.width,aspectratio:s.aspect_ratio,autostart:s.autoplay})}r.carousel=function(e){var r=t("#"+e.id),o=r.find("div.swipe"),a="page-nav__dot--active",l=t(n(r.find("div.swipe__page").length)).addClass("pages-carousel__nav").appendTo(r),u=l.find("li.page-nav__dot"),c=new i(o.get(0),{continuous:!0,stopPropagation:!0,callback:function(t){u.removeClass(a).eq(t).addClass(a)}});if(o.addClass("swipe--initialized"),u.on("click",function(t){t.preventDefault(),c.slide(u.index(this))}).eq(0).addClass(a),r.find("a.pages-carousel__flipper, a.page-nav__prev, a.page-nav__next").on("click",function(e){e.preventDefault(),c[t(this).attr("href").split("#").pop()]()}),e.auto){var h=new s({delay:e.delay,interval:e.interval});h.add(function(){c.next()}),h.start(),e.hoverPause&&r.on("mouseenter",function(){h.stop()}).on("mouseleave",function(){h.start()})}},r.dynamic=function(t){var e=Array.prototype.slice.call(arguments,1);
require(["pages/dynamic/"+t],function(t){t.apply(this,e)})},r.share=function(e,i){t("#"+e).share(i)},r.submenu=function(){t("#submenu").submenu()},r.jwplayer=function(t){require(["jwplayer/jwplayer"],function(){o(window.jwplayer,t)})},r.table=function(e){t("#"+e).table()},e({modules:{pages:r}})})}();
//# sourceMappingURL=pages.js.map